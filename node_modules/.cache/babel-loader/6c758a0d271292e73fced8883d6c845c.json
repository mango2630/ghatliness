{"remainingRequest":"F:\\Web_design\\item\\node_modules\\babel-loader\\lib\\index.js!F:\\Web_design\\item\\src\\assets\\promanage\\js\\bootstrap.js","dependencies":[{"path":"F:\\Web_design\\item\\src\\assets\\promanage\\js\\bootstrap.js","mtime":1613734261932},{"path":"F:\\Web_design\\item\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Web_design\\item\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCJGOi9XZWJfZGVzaWduL2l0ZW0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikuZGVmYXVsdDsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKLyohCiAqIEJvb3RzdHJhcCB2My4xLjEgKGh0dHA6Ly9nZXRib290c3RyYXAuY29tKQogKiBDb3B5cmlnaHQgMjAxMS0yMDE0IFR3aXR0ZXIsIEluYy4KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkKICovCmlmICh0eXBlb2YgalF1ZXJ5ID09PSAndW5kZWZpbmVkJykgewogIHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5Jyk7Cn0KLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5qcyB2My4xLjEKICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdHJhbnNpdGlvbnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTQgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCgorZnVuY3Rpb24gKCQpIHsKICAndXNlIHN0cmljdCc7IC8vIENTUyBUUkFOU0lUSU9OIFNVUFBPUlQgKFNob3V0b3V0OiBodHRwOi8vd3d3Lm1vZGVybml6ci5jb20vKQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkgewogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9vdHN0cmFwJyk7CiAgICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0gewogICAgICAnV2Via2l0VHJhbnNpdGlvbic6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJywKICAgICAgJ01velRyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsCiAgICAgICdPVHJhbnNpdGlvbic6ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsCiAgICAgICd0cmFuc2l0aW9uJzogJ3RyYW5zaXRpb25lbmQnCiAgICB9OwoKICAgIGZvciAodmFyIG5hbWUgaW4gdHJhbnNFbmRFdmVudE5hbWVzKSB7CiAgICAgIGlmIChlbC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGVuZDogdHJhbnNFbmRFdmVudE5hbWVzW25hbWVdCiAgICAgICAgfTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsgLy8gZXhwbGljaXQgZm9yIGllOCAoICAuXy4pCiAgfSAvLyBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnMKCgogICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHsKICAgIHZhciBjYWxsZWQgPSBmYWxzZSwKICAgICAgICAkZWwgPSB0aGlzOwogICAgJCh0aGlzKS5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNhbGxlZCA9IHRydWU7CiAgICB9KTsKCiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgaWYgKCFjYWxsZWQpICQoJGVsKS50cmlnZ2VyKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCk7CiAgICB9OwoKICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogICQoZnVuY3Rpb24gKCkgewogICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKCk7CiAgfSk7Cn0oalF1ZXJ5KTsKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogYWxlcnQuanMgdjMuMS4xCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FsZXJ0cwogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBBTEVSVCBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgZGlzbWlzcyA9ICdbZGF0YS1kaXNtaXNzPSJhbGVydCJdJzsKCiAgdmFyIEFsZXJ0ID0gZnVuY3Rpb24gQWxlcnQoZWwpIHsKICAgICQoZWwpLm9uKCdjbGljaycsIGRpc21pc3MsIHRoaXMuY2xvc2UpOwogIH07CgogIEFsZXJ0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKTsKCiAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpOwogICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywgJycpOyAvLyBzdHJpcCBmb3IgaWU3CiAgICB9CgogICAgdmFyICRwYXJlbnQgPSAkKHNlbGVjdG9yKTsKICAgIGlmIChlKSBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgaWYgKCEkcGFyZW50Lmxlbmd0aCkgewogICAgICAkcGFyZW50ID0gJHRoaXMuaGFzQ2xhc3MoJ2FsZXJ0JykgPyAkdGhpcyA6ICR0aGlzLnBhcmVudCgpOwogICAgfQoKICAgICRwYXJlbnQudHJpZ2dlcihlID0gJC5FdmVudCgnY2xvc2UuYnMuYWxlcnQnKSk7CiAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuOwogICAgJHBhcmVudC5yZW1vdmVDbGFzcygnaW4nKTsKCiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkgewogICAgICAkcGFyZW50LnRyaWdnZXIoJ2Nsb3NlZC5icy5hbGVydCcpLnJlbW92ZSgpOwogICAgfQoKICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICRwYXJlbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/ICRwYXJlbnQub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgcmVtb3ZlRWxlbWVudCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKSA6IHJlbW92ZUVsZW1lbnQoKTsKICB9OyAvLyBBTEVSVCBQTFVHSU4gREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09PT09CgoKICB2YXIgb2xkID0gJC5mbi5hbGVydDsKCiAgJC5mbi5hbGVydCA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoJ2JzLmFsZXJ0Jyk7CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWxlcnQnLCBkYXRhID0gbmV3IEFsZXJ0KHRoaXMpKTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKTsKICAgIH0pOwogIH07CgogICQuZm4uYWxlcnQuQ29uc3RydWN0b3IgPSBBbGVydDsgLy8gQUxFUlQgTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PQoKICAkLmZuLmFsZXJ0Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLmFsZXJ0ID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gQUxFUlQgREFUQS1BUEkKICAvLyA9PT09PT09PT09PT09PQoKCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpJywgZGlzbWlzcywgQWxlcnQucHJvdG90eXBlLmNsb3NlKTsKfShqUXVlcnkpOwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQm9vdHN0cmFwOiBidXR0b24uanMgdjMuMS4xCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2J1dHRvbnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTQgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCitmdW5jdGlvbiAoJCkgewogICd1c2Ugc3RyaWN0JzsgLy8gQlVUVE9OIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIHZhciBCdXR0b24gPSBmdW5jdGlvbiBCdXR0b24oZWxlbWVudCwgb3B0aW9ucykgewogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQnV0dG9uLkRFRkFVTFRTLCBvcHRpb25zKTsKICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgfTsKCiAgQnV0dG9uLkRFRkFVTFRTID0gewogICAgbG9hZGluZ1RleHQ6ICdsb2FkaW5nLi4uJwogIH07CgogIEJ1dHRvbi5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHZhciBkID0gJ2Rpc2FibGVkJzsKICAgIHZhciAkZWwgPSB0aGlzLiRlbGVtZW50OwogICAgdmFyIHZhbCA9ICRlbC5pcygnaW5wdXQnKSA/ICd2YWwnIDogJ2h0bWwnOwogICAgdmFyIGRhdGEgPSAkZWwuZGF0YSgpOwogICAgc3RhdGUgPSBzdGF0ZSArICdUZXh0JzsKICAgIGlmICghZGF0YS5yZXNldFRleHQpICRlbC5kYXRhKCdyZXNldFRleHQnLCAkZWxbdmFsXSgpKTsKICAgICRlbFt2YWxdKGRhdGFbc3RhdGVdIHx8IHRoaXMub3B0aW9uc1tzdGF0ZV0pOyAvLyBwdXNoIHRvIGV2ZW50IGxvb3AgdG8gYWxsb3cgZm9ybXMgdG8gc3VibWl0CgogICAgc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHN0YXRlID09ICdsb2FkaW5nVGV4dCcpIHsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgICAgJGVsLmFkZENsYXNzKGQpLmF0dHIoZCwgZCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0xvYWRpbmcpIHsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICRlbC5yZW1vdmVDbGFzcyhkKS5yZW1vdmVBdHRyKGQpOwogICAgICB9CiAgICB9LCB0aGlzKSwgMCk7CiAgfTsKCiAgQnV0dG9uLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY2hhbmdlZCA9IHRydWU7CiAgICB2YXIgJHBhcmVudCA9IHRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPSJidXR0b25zIl0nKTsKCiAgICBpZiAoJHBhcmVudC5sZW5ndGgpIHsKICAgICAgdmFyICRpbnB1dCA9IHRoaXMuJGVsZW1lbnQuZmluZCgnaW5wdXQnKTsKCiAgICAgIGlmICgkaW5wdXQucHJvcCgndHlwZScpID09ICdyYWRpbycpIHsKICAgICAgICBpZiAoJGlucHV0LnByb3AoJ2NoZWNrZWQnKSAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSkgY2hhbmdlZCA9IGZhbHNlO2Vsc2UgJHBhcmVudC5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICB9CgogICAgICBpZiAoY2hhbmdlZCkgJGlucHV0LnByb3AoJ2NoZWNrZWQnLCAhdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpLnRyaWdnZXIoJ2NoYW5nZScpOwogICAgfQoKICAgIGlmIChjaGFuZ2VkKSB0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsKICB9OyAvLyBCVVRUT04gUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0KCgogIHZhciBvbGQgPSAkLmZuLmJ1dHRvbjsKCiAgJC5mbi5idXR0b24gPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdicy5idXR0b24nKTsKICAgICAgdmFyIG9wdGlvbnMgPSBfdHlwZW9mKG9wdGlvbikgPT0gJ29iamVjdCcgJiYgb3B0aW9uOwogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmJ1dHRvbicsIGRhdGEgPSBuZXcgQnV0dG9uKHRoaXMsIG9wdGlvbnMpKTsKICAgICAgaWYgKG9wdGlvbiA9PSAndG9nZ2xlJykgZGF0YS50b2dnbGUoKTtlbHNlIGlmIChvcHRpb24pIGRhdGEuc2V0U3RhdGUob3B0aW9uKTsKICAgIH0pOwogIH07CgogICQuZm4uYnV0dG9uLkNvbnN0cnVjdG9yID0gQnV0dG9uOyAvLyBCVVRUT04gTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PT0KCiAgJC5mbi5idXR0b24ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uYnV0dG9uID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gQlVUVE9OIERBVEEtQVBJCiAgLy8gPT09PT09PT09PT09PT09CgoKICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZV49YnV0dG9uXScsIGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgJGJ0biA9ICQoZS50YXJnZXQpOwogICAgaWYgKCEkYnRuLmhhc0NsYXNzKCdidG4nKSkgJGJ0biA9ICRidG4uY2xvc2VzdCgnLmJ0bicpOwogICAgJGJ0bi5idXR0b24oJ3RvZ2dsZScpOwogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogIH0pOwp9KGpRdWVyeSk7Ci8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBCb290c3RyYXA6IGNhcm91c2VsLmpzIHYzLjEuMQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjYXJvdXNlbAogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBDQVJPVVNFTCBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgQ2Fyb3VzZWwgPSBmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50LCBvcHRpb25zKSB7CiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHRoaXMuJGluZGljYXRvcnMgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5jYXJvdXNlbC1pbmRpY2F0b3JzJyk7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgdGhpcy5wYXVzZWQgPSB0aGlzLnNsaWRpbmcgPSB0aGlzLmludGVydmFsID0gdGhpcy4kYWN0aXZlID0gdGhpcy4kaXRlbXMgPSBudWxsOwogICAgdGhpcy5vcHRpb25zLnBhdXNlID09ICdob3ZlcicgJiYgdGhpcy4kZWxlbWVudC5vbignbW91c2VlbnRlcicsICQucHJveHkodGhpcy5wYXVzZSwgdGhpcykpLm9uKCdtb3VzZWxlYXZlJywgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSk7CiAgfTsKCiAgQ2Fyb3VzZWwuREVGQVVMVFMgPSB7CiAgICBpbnRlcnZhbDogNTAwMCwKICAgIHBhdXNlOiAnaG92ZXInLAogICAgd3JhcDogdHJ1ZQogIH07CgogIENhcm91c2VsLnByb3RvdHlwZS5jeWNsZSA9IGZ1bmN0aW9uIChlKSB7CiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IGZhbHNlKTsKICAgIHRoaXMuaW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgIHRoaXMub3B0aW9ucy5pbnRlcnZhbCAmJiAhdGhpcy5wYXVzZWQgJiYgKHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMubmV4dCwgdGhpcyksIHRoaXMub3B0aW9ucy5pbnRlcnZhbCkpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEFjdGl2ZUluZGV4ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy4kYWN0aXZlID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKTsKICAgIHRoaXMuJGl0ZW1zID0gdGhpcy4kYWN0aXZlLnBhcmVudCgpLmNoaWxkcmVuKCk7CiAgICByZXR1cm4gdGhpcy4kaXRlbXMuaW5kZXgodGhpcy4kYWN0aXZlKTsKICB9OwoKICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEFjdGl2ZUluZGV4KCk7CiAgICBpZiAocG9zID4gdGhpcy4kaXRlbXMubGVuZ3RoIC0gMSB8fCBwb3MgPCAwKSByZXR1cm47CiAgICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm4gdGhpcy4kZWxlbWVudC5vbmUoJ3NsaWQuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQudG8ocG9zKTsKICAgIH0pOwogICAgaWYgKGFjdGl2ZUluZGV4ID09IHBvcykgcmV0dXJuIHRoaXMucGF1c2UoKS5jeWNsZSgpOwogICAgcmV0dXJuIHRoaXMuc2xpZGUocG9zID4gYWN0aXZlSW5kZXggPyAnbmV4dCcgOiAncHJldicsICQodGhpcy4kaXRlbXNbcG9zXSkpOwogIH07CgogIENhcm91c2VsLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uIChlKSB7CiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IHRydWUpOwoKICAgIGlmICh0aGlzLiRlbGVtZW50LmZpbmQoJy5uZXh0LCAucHJldicpLmxlbmd0aCAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbikgewogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKTsKICAgICAgdGhpcy5jeWNsZSh0cnVlKTsKICAgIH0KCiAgICB0aGlzLmludGVydmFsID0gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgIHJldHVybiB0aGlzOwogIH07CgogIENhcm91c2VsLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuOwogICAgcmV0dXJuIHRoaXMuc2xpZGUoJ25leHQnKTsKICB9OwoKICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVybjsKICAgIHJldHVybiB0aGlzLnNsaWRlKCdwcmV2Jyk7CiAgfTsKCiAgQ2Fyb3VzZWwucHJvdG90eXBlLnNsaWRlID0gZnVuY3Rpb24gKHR5cGUsIG5leHQpIHsKICAgIHZhciAkYWN0aXZlID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKTsKICAgIHZhciAkbmV4dCA9IG5leHQgfHwgJGFjdGl2ZVt0eXBlXSgpOwogICAgdmFyIGlzQ3ljbGluZyA9IHRoaXMuaW50ZXJ2YWw7CiAgICB2YXIgZGlyZWN0aW9uID0gdHlwZSA9PSAnbmV4dCcgPyAnbGVmdCcgOiAncmlnaHQnOwogICAgdmFyIGZhbGxiYWNrID0gdHlwZSA9PSAnbmV4dCcgPyAnZmlyc3QnIDogJ2xhc3QnOwogICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgIGlmICghJG5leHQubGVuZ3RoKSB7CiAgICAgIGlmICghdGhpcy5vcHRpb25zLndyYXApIHJldHVybjsKICAgICAgJG5leHQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtJylbZmFsbGJhY2tdKCk7CiAgICB9CgogICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgdmFyIGUgPSAkLkV2ZW50KCdzbGlkZS5icy5jYXJvdXNlbCcsIHsKICAgICAgcmVsYXRlZFRhcmdldDogJG5leHRbMF0sCiAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uCiAgICB9KTsKICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKTsKICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm47CiAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgaXNDeWNsaW5nICYmIHRoaXMucGF1c2UoKTsKCiAgICBpZiAodGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpIHsKICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICB0aGlzLiRlbGVtZW50Lm9uZSgnc2xpZC5icy5jYXJvdXNlbCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgJG5leHRJbmRpY2F0b3IgPSAkKHRoYXQuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGF0LmdldEFjdGl2ZUluZGV4KCldKTsKICAgICAgICAkbmV4dEluZGljYXRvciAmJiAkbmV4dEluZGljYXRvci5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgIH0pOwogICAgfQoKICAgIGlmICgkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdzbGlkZScpKSB7CiAgICAgICRuZXh0LmFkZENsYXNzKHR5cGUpOwogICAgICAkbmV4dFswXS5vZmZzZXRXaWR0aDsgLy8gZm9yY2UgcmVmbG93CgogICAgICAkYWN0aXZlLmFkZENsYXNzKGRpcmVjdGlvbik7CiAgICAgICRuZXh0LmFkZENsYXNzKGRpcmVjdGlvbik7CiAgICAgICRhY3RpdmUub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgZnVuY3Rpb24gKCkgewogICAgICAgICRuZXh0LnJlbW92ZUNsYXNzKFt0eXBlLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSkuYWRkQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoWydhY3RpdmUnLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSk7CiAgICAgICAgdGhhdC5zbGlkaW5nID0gZmFsc2U7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoJ3NsaWQuYnMuY2Fyb3VzZWwnKTsKICAgICAgICB9LCAwKTsKICAgICAgfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoJGFjdGl2ZS5jc3MoJ3RyYW5zaXRpb24tZHVyYXRpb24nKS5zbGljZSgwLCAtMSkgKiAxMDAwKTsKICAgIH0gZWxzZSB7CiAgICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOwogICAgICAkbmV4dC5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ3NsaWQuYnMuY2Fyb3VzZWwnKTsKICAgIH0KCiAgICBpc0N5Y2xpbmcgJiYgdGhpcy5jeWNsZSgpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gQ0FST1VTRUwgUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAgdmFyIG9sZCA9ICQuZm4uY2Fyb3VzZWw7CgogICQuZm4uY2Fyb3VzZWwgPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdicy5jYXJvdXNlbCcpOwogICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCBfdHlwZW9mKG9wdGlvbikgPT0gJ29iamVjdCcgJiYgb3B0aW9uKTsKICAgICAgdmFyIGFjdGlvbiA9IHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgPyBvcHRpb24gOiBvcHRpb25zLnNsaWRlOwogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJywgZGF0YSA9IG5ldyBDYXJvdXNlbCh0aGlzLCBvcHRpb25zKSk7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdudW1iZXInKSBkYXRhLnRvKG9wdGlvbik7ZWxzZSBpZiAoYWN0aW9uKSBkYXRhW2FjdGlvbl0oKTtlbHNlIGlmIChvcHRpb25zLmludGVydmFsKSBkYXRhLnBhdXNlKCkuY3ljbGUoKTsKICAgIH0pOwogIH07CgogICQuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3IgPSBDYXJvdXNlbDsgLy8gQ0FST1VTRUwgTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PT09PQoKICAkLmZuLmNhcm91c2VsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLmNhcm91c2VsID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gQ0FST1VTRUwgREFUQS1BUEkKICAvLyA9PT09PT09PT09PT09PT09PQoKCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dJywgZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkdGhpcyA9ICQodGhpcyksCiAgICAgICAgaHJlZjsKICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmID0gJHRoaXMuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywgJycpKTsgLy9zdHJpcCBmb3IgaWU3CgogICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSk7CiAgICB2YXIgc2xpZGVJbmRleCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2xpZGUtdG8nKTsKICAgIGlmIChzbGlkZUluZGV4KSBvcHRpb25zLmludGVydmFsID0gZmFsc2U7CiAgICAkdGFyZ2V0LmNhcm91c2VsKG9wdGlvbnMpOwoKICAgIGlmIChzbGlkZUluZGV4ID0gJHRoaXMuYXR0cignZGF0YS1zbGlkZS10bycpKSB7CiAgICAgICR0YXJnZXQuZGF0YSgnYnMuY2Fyb3VzZWwnKS50byhzbGlkZUluZGV4KTsKICAgIH0KCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgfSk7CiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkgewogICAgJCgnW2RhdGEtcmlkZT0iY2Fyb3VzZWwiXScpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKTsKICAgICAgJGNhcm91c2VsLmNhcm91c2VsKCRjYXJvdXNlbC5kYXRhKCkpOwogICAgfSk7CiAgfSk7Cn0oalF1ZXJ5KTsKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogY29sbGFwc2UuanMgdjMuMS4xCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2NvbGxhcHNlCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5cmlnaHQgMjAxMS0yMDE0IFR3aXR0ZXIsIEluYy4KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgorZnVuY3Rpb24gKCQpIHsKICAndXNlIHN0cmljdCc7IC8vIENPTExBUFNFIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgdmFyIENvbGxhcHNlID0gZnVuY3Rpb24gQ29sbGFwc2UoZWxlbWVudCwgb3B0aW9ucykgewogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsIG9wdGlvbnMpOwogICAgdGhpcy50cmFuc2l0aW9uaW5nID0gbnVsbDsKICAgIGlmICh0aGlzLm9wdGlvbnMucGFyZW50KSB0aGlzLiRwYXJlbnQgPSAkKHRoaXMub3B0aW9ucy5wYXJlbnQpOwogICAgaWYgKHRoaXMub3B0aW9ucy50b2dnbGUpIHRoaXMudG9nZ2xlKCk7CiAgfTsKCiAgQ29sbGFwc2UuREVGQVVMVFMgPSB7CiAgICB0b2dnbGU6IHRydWUKICB9OwoKICBDb2xsYXBzZS5wcm90b3R5cGUuZGltZW5zaW9uID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGhhc1dpZHRoID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnd2lkdGgnKTsKICAgIHJldHVybiBoYXNXaWR0aCA/ICd3aWR0aCcgOiAnaGVpZ2h0JzsKICB9OwoKICBDb2xsYXBzZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnaW4nKSkgcmV0dXJuOwogICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLmNvbGxhcHNlJyk7CiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudCk7CiAgICBpZiAoc3RhcnRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuOwogICAgdmFyIGFjdGl2ZXMgPSB0aGlzLiRwYXJlbnQgJiYgdGhpcy4kcGFyZW50LmZpbmQoJz4gLnBhbmVsID4gLmluJyk7CgogICAgaWYgKGFjdGl2ZXMgJiYgYWN0aXZlcy5sZW5ndGgpIHsKICAgICAgdmFyIGhhc0RhdGEgPSBhY3RpdmVzLmRhdGEoJ2JzLmNvbGxhcHNlJyk7CiAgICAgIGlmIChoYXNEYXRhICYmIGhhc0RhdGEudHJhbnNpdGlvbmluZykgcmV0dXJuOwogICAgICBhY3RpdmVzLmNvbGxhcHNlKCdoaWRlJyk7CiAgICAgIGhhc0RhdGEgfHwgYWN0aXZlcy5kYXRhKCdicy5jb2xsYXBzZScsIG51bGwpOwogICAgfQoKICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpOwogICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcygnY29sbGFwc2UnKS5hZGRDbGFzcygnY29sbGFwc2luZycpW2RpbWVuc2lvbl0oMCk7CiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAxOwoKICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCdjb2xsYXBzaW5nJykuYWRkQ2xhc3MoJ2NvbGxhcHNlIGluJylbZGltZW5zaW9uXSgnYXV0bycpOwogICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwOwogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ3Nob3duLmJzLmNvbGxhcHNlJyk7CiAgICB9OwoKICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgdmFyIHNjcm9sbFNpemUgPSAkLmNhbWVsQ2FzZShbJ3Njcm9sbCcsIGRpbWVuc2lvbl0uam9pbignLScpKTsKICAgIHRoaXMuJGVsZW1lbnQub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgJC5wcm94eShjb21wbGV0ZSwgdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDM1MClbZGltZW5zaW9uXSh0aGlzLiRlbGVtZW50WzBdW3Njcm9sbFNpemVdKTsKICB9OwoKICBDb2xsYXBzZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmcgfHwgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHJldHVybjsKICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudCgnaGlkZS5icy5jb2xsYXBzZScpOwogICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHN0YXJ0RXZlbnQpOwogICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjsKICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpOwogICAgdGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKHRoaXMuJGVsZW1lbnRbZGltZW5zaW9uXSgpKVswXS5vZmZzZXRIZWlnaHQ7CiAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKCdjb2xsYXBzaW5nJykucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlJykucmVtb3ZlQ2xhc3MoJ2luJyk7CiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAxOwoKICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAwOwogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2hpZGRlbi5icy5jb2xsYXBzZScpLnJlbW92ZUNsYXNzKCdjb2xsYXBzaW5nJykuYWRkQ2xhc3MoJ2NvbGxhcHNlJyk7CiAgICB9OwoKICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRoaXMpOwogICAgdGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKDApLm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsICQucHJveHkoY29tcGxldGUsIHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzNTApOwogIH07CgogIENvbGxhcHNlLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzW3RoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykgPyAnaGlkZScgOiAnc2hvdyddKCk7CiAgfTsgLy8gQ09MTEFQU0UgUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAgdmFyIG9sZCA9ICQuZm4uY29sbGFwc2U7CgogICQuZm4uY29sbGFwc2UgPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdicy5jb2xsYXBzZScpOwogICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDb2xsYXBzZS5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCBfdHlwZW9mKG9wdGlvbikgPT0gJ29iamVjdCcgJiYgb3B0aW9uKTsKICAgICAgaWYgKCFkYXRhICYmIG9wdGlvbnMudG9nZ2xlICYmIG9wdGlvbiA9PSAnc2hvdycpIG9wdGlvbiA9ICFvcHRpb247CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnLCBkYXRhID0gbmV3IENvbGxhcHNlKHRoaXMsIG9wdGlvbnMpKTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpOwogICAgfSk7CiAgfTsKCiAgJC5mbi5jb2xsYXBzZS5Db25zdHJ1Y3RvciA9IENvbGxhcHNlOyAvLyBDT0xMQVBTRSBOTyBDT05GTElDVAogIC8vID09PT09PT09PT09PT09PT09PT09CgogICQuZm4uY29sbGFwc2Uubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uY29sbGFwc2UgPSBvbGQ7CiAgICByZXR1cm4gdGhpczsKICB9OyAvLyBDT0xMQVBTRSBEQVRBLUFQSQogIC8vID09PT09PT09PT09PT09PT09CgoKICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPWNvbGxhcHNlXScsIGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLAogICAgICAgIGhyZWY7CiAgICB2YXIgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSB8fCBlLnByZXZlbnREZWZhdWx0KCkgfHwgKGhyZWYgPSAkdGhpcy5hdHRyKCdocmVmJykpICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cc10rJCkvLCAnJyk7IC8vc3RyaXAgZm9yIGllNwoKICAgIHZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpOwogICAgdmFyIGRhdGEgPSAkdGFyZ2V0LmRhdGEoJ2JzLmNvbGxhcHNlJyk7CiAgICB2YXIgb3B0aW9uID0gZGF0YSA/ICd0b2dnbGUnIDogJHRoaXMuZGF0YSgpOwogICAgdmFyIHBhcmVudCA9ICR0aGlzLmF0dHIoJ2RhdGEtcGFyZW50Jyk7CiAgICB2YXIgJHBhcmVudCA9IHBhcmVudCAmJiAkKHBhcmVudCk7CgogICAgaWYgKCFkYXRhIHx8ICFkYXRhLnRyYW5zaXRpb25pbmcpIHsKICAgICAgaWYgKCRwYXJlbnQpICRwYXJlbnQuZmluZCgnW2RhdGEtdG9nZ2xlPWNvbGxhcHNlXVtkYXRhLXBhcmVudD0iJyArIHBhcmVudCArICciXScpLm5vdCgkdGhpcykuYWRkQ2xhc3MoJ2NvbGxhcHNlZCcpOwogICAgICAkdGhpc1skdGFyZ2V0Lmhhc0NsYXNzKCdpbicpID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKCdjb2xsYXBzZWQnKTsKICAgIH0KCiAgICAkdGFyZ2V0LmNvbGxhcHNlKG9wdGlvbik7CiAgfSk7Cn0oalF1ZXJ5KTsKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogZHJvcGRvd24uanMgdjMuMS4xCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2Ryb3Bkb3ducwogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBEUk9QRE9XTiBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgYmFja2Ryb3AgPSAnLmRyb3Bkb3duLWJhY2tkcm9wJzsKICB2YXIgdG9nZ2xlID0gJ1tkYXRhLXRvZ2dsZT1kcm9wZG93bl0nOwoKICB2YXIgRHJvcGRvd24gPSBmdW5jdGlvbiBEcm9wZG93bihlbGVtZW50KSB7CiAgICAkKGVsZW1lbnQpLm9uKCdjbGljay5icy5kcm9wZG93bicsIHRoaXMudG9nZ2xlKTsKICB9OwoKICBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVybjsKICAgIHZhciAkcGFyZW50ID0gZ2V0UGFyZW50KCR0aGlzKTsKICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKTsKICAgIGNsZWFyTWVudXMoKTsKCiAgICBpZiAoIWlzQWN0aXZlKSB7CiAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgISRwYXJlbnQuY2xvc2VzdCgnLm5hdmJhci1uYXYnKS5sZW5ndGgpIHsKICAgICAgICAvLyBpZiBtb2JpbGUgd2UgdXNlIGEgYmFja2Ryb3AgYmVjYXVzZSBjbGljayBldmVudHMgZG9uJ3QgZGVsZWdhdGUKICAgICAgICAkKCc8ZGl2IGNsYXNzPSJkcm9wZG93bi1iYWNrZHJvcCIvPicpLmluc2VydEFmdGVyKCQodGhpcykpLm9uKCdjbGljaycsIGNsZWFyTWVudXMpOwogICAgICB9CgogICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzCiAgICAgIH07CiAgICAgICRwYXJlbnQudHJpZ2dlcihlID0gJC5FdmVudCgnc2hvdy5icy5kcm9wZG93bicsIHJlbGF0ZWRUYXJnZXQpKTsKICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjsKICAgICAgJHBhcmVudC50b2dnbGVDbGFzcygnb3BlbicpLnRyaWdnZXIoJ3Nob3duLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCk7CiAgICAgICR0aGlzLmZvY3VzKCk7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHsKICAgIGlmICghLygzOHw0MHwyNykvLnRlc3QoZS5rZXlDb2RlKSkgcmV0dXJuOwogICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBpZiAoJHRoaXMuaXMoJy5kaXNhYmxlZCwgOmRpc2FibGVkJykpIHJldHVybjsKICAgIHZhciAkcGFyZW50ID0gZ2V0UGFyZW50KCR0aGlzKTsKICAgIHZhciBpc0FjdGl2ZSA9ICRwYXJlbnQuaGFzQ2xhc3MoJ29wZW4nKTsKCiAgICBpZiAoIWlzQWN0aXZlIHx8IGlzQWN0aXZlICYmIGUua2V5Q29kZSA9PSAyNykgewogICAgICBpZiAoZS53aGljaCA9PSAyNykgJHBhcmVudC5maW5kKHRvZ2dsZSkuZm9jdXMoKTsKICAgICAgcmV0dXJuICR0aGlzLmNsaWNrKCk7CiAgICB9CgogICAgdmFyIGRlc2MgPSAnIGxpOm5vdCguZGl2aWRlcik6dmlzaWJsZSBhJzsKICAgIHZhciAkaXRlbXMgPSAkcGFyZW50LmZpbmQoJ1tyb2xlPW1lbnVdJyArIGRlc2MgKyAnLCBbcm9sZT1saXN0Ym94XScgKyBkZXNjKTsKICAgIGlmICghJGl0ZW1zLmxlbmd0aCkgcmV0dXJuOwogICAgdmFyIGluZGV4ID0gJGl0ZW1zLmluZGV4KCRpdGVtcy5maWx0ZXIoJzpmb2N1cycpKTsKICAgIGlmIChlLmtleUNvZGUgPT0gMzggJiYgaW5kZXggPiAwKSBpbmRleC0tOyAvLyB1cAoKICAgIGlmIChlLmtleUNvZGUgPT0gNDAgJiYgaW5kZXggPCAkaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKzsgLy8gZG93bgoKICAgIGlmICghfmluZGV4KSBpbmRleCA9IDA7CiAgICAkaXRlbXMuZXEoaW5kZXgpLmZvY3VzKCk7CiAgfTsKCiAgZnVuY3Rpb24gY2xlYXJNZW51cyhlKSB7CiAgICAkKGJhY2tkcm9wKS5yZW1vdmUoKTsKICAgICQodG9nZ2xlKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICRwYXJlbnQgPSBnZXRQYXJlbnQoJCh0aGlzKSk7CiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMKICAgICAgfTsKICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykpIHJldHVybjsKICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdoaWRlLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCkpOwogICAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuOwogICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuJykudHJpZ2dlcignaGlkZGVuLmJzLmRyb3Bkb3duJywgcmVsYXRlZFRhcmdldCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGdldFBhcmVudCgkdGhpcykgewogICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKTsKCiAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cignaHJlZicpOwogICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIC8jW0EtWmEtel0vLnRlc3Qoc2VsZWN0b3IpICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywgJycpOyAvL3N0cmlwIGZvciBpZTcKICAgIH0KCiAgICB2YXIgJHBhcmVudCA9IHNlbGVjdG9yICYmICQoc2VsZWN0b3IpOwogICAgcmV0dXJuICRwYXJlbnQgJiYgJHBhcmVudC5sZW5ndGggPyAkcGFyZW50IDogJHRoaXMucGFyZW50KCk7CiAgfSAvLyBEUk9QRE9XTiBQTFVHSU4gREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09CgoKICB2YXIgb2xkID0gJC5mbi5kcm9wZG93bjsKCiAgJC5mbi5kcm9wZG93biA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoJ2JzLmRyb3Bkb3duJyk7CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuZHJvcGRvd24nLCBkYXRhID0gbmV3IERyb3Bkb3duKHRoaXMpKTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKTsKICAgIH0pOwogIH07CgogICQuZm4uZHJvcGRvd24uQ29uc3RydWN0b3IgPSBEcm9wZG93bjsgLy8gRFJPUERPV04gTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PT09PQoKICAkLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLmRyb3Bkb3duID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gQVBQTFkgVE8gU1RBTkRBUkQgRFJPUERPV04gRUxFTUVOVFMKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgY2xlYXJNZW51cykub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgJy5kcm9wZG93biBmb3JtJywgZnVuY3Rpb24gKGUpIHsKICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgfSkub24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUudG9nZ2xlKS5vbigna2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaScsIHRvZ2dsZSArICcsIFtyb2xlPW1lbnVdLCBbcm9sZT1saXN0Ym94XScsIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duKTsKfShqUXVlcnkpOwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQm9vdHN0cmFwOiBtb2RhbC5qcyB2My4xLjEKICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jbW9kYWxzCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5cmlnaHQgMjAxMS0yMDE0IFR3aXR0ZXIsIEluYy4KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgorZnVuY3Rpb24gKCQpIHsKICAndXNlIHN0cmljdCc7IC8vIE1PREFMIENMQVNTIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09CgogIHZhciBNb2RhbCA9IGZ1bmN0aW9uIE1vZGFsKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHRoaXMuJGJhY2tkcm9wID0gdGhpcy5pc1Nob3duID0gbnVsbDsKCiAgICBpZiAodGhpcy5vcHRpb25zLnJlbW90ZSkgewogICAgICB0aGlzLiRlbGVtZW50LmZpbmQoJy5tb2RhbC1jb250ZW50JykubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLCAkLnByb3h5KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5icy5tb2RhbCcpOwogICAgICB9LCB0aGlzKSk7CiAgICB9CiAgfTsKCiAgTW9kYWwuREVGQVVMVFMgPSB7CiAgICBiYWNrZHJvcDogdHJ1ZSwKICAgIGtleWJvYXJkOiB0cnVlLAogICAgc2hvdzogdHJ1ZQogIH07CgogIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoX3JlbGF0ZWRUYXJnZXQpIHsKICAgIHJldHVybiB0aGlzWyF0aGlzLmlzU2hvd24gPyAnc2hvdycgOiAnaGlkZSddKF9yZWxhdGVkVGFyZ2V0KTsKICB9OwoKICBNb2RhbC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uIChfcmVsYXRlZFRhcmdldCkgewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93LmJzLm1vZGFsJywgewogICAgICByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldAogICAgfSk7CiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSk7CiAgICBpZiAodGhpcy5pc1Nob3duIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjsKICAgIHRoaXMuaXNTaG93biA9IHRydWU7CiAgICB0aGlzLmVzY2FwZSgpOwogICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suZGlzbWlzcy5icy5tb2RhbCcsICdbZGF0YS1kaXNtaXNzPSJtb2RhbCJdJywgJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpKTsKICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkgewogICAgICB2YXIgdHJhbnNpdGlvbiA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoYXQuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKTsKCiAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHsKICAgICAgICB0aGF0LiRlbGVtZW50LmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpOyAvLyBkb24ndCBtb3ZlIG1vZGFscyBkb20gcG9zaXRpb24KICAgICAgfQoKICAgICAgdGhhdC4kZWxlbWVudC5zaG93KCkuc2Nyb2xsVG9wKDApOwoKICAgICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgICB0aGF0LiRlbGVtZW50WzBdLm9mZnNldFdpZHRoOyAvLyBmb3JjZSByZWZsb3cKICAgICAgfQoKICAgICAgdGhhdC4kZWxlbWVudC5hZGRDbGFzcygnaW4nKS5hdHRyKCdhcmlhLWhpZGRlbicsIGZhbHNlKTsKICAgICAgdGhhdC5lbmZvcmNlRm9jdXMoKTsKICAgICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93bi5icy5tb2RhbCcsIHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiBfcmVsYXRlZFRhcmdldAogICAgICB9KTsKICAgICAgdHJhbnNpdGlvbiA/IHRoYXQuJGVsZW1lbnQuZmluZCgnLm1vZGFsLWRpYWxvZycpIC8vIHdhaXQgZm9yIG1vZGFsIHRvIHNsaWRlIGluCiAgICAgIC5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhhdC4kZWxlbWVudC5mb2N1cygpLnRyaWdnZXIoZSk7CiAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDMwMCkgOiB0aGF0LiRlbGVtZW50LmZvY3VzKCkudHJpZ2dlcihlKTsKICAgIH0pOwogIH07CgogIE1vZGFsLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGUpIHsKICAgIGlmIChlKSBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBlID0gJC5FdmVudCgnaGlkZS5icy5tb2RhbCcpOwogICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpOwogICAgaWYgKCF0aGlzLmlzU2hvd24gfHwgZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuOwogICAgdGhpcy5pc1Nob3duID0gZmFsc2U7CiAgICB0aGlzLmVzY2FwZSgpOwogICAgJChkb2N1bWVudCkub2ZmKCdmb2N1c2luLmJzLm1vZGFsJyk7CiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCdpbicpLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSkub2ZmKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJyk7CiAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyB0aGlzLiRlbGVtZW50Lm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsICQucHJveHkodGhpcy5oaWRlTW9kYWwsIHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzMDApIDogdGhpcy5oaWRlTW9kYWwoKTsKICB9OwoKICBNb2RhbC5wcm90b3R5cGUuZW5mb3JjZUZvY3VzID0gZnVuY3Rpb24gKCkgewogICAgJChkb2N1bWVudCkub2ZmKCdmb2N1c2luLmJzLm1vZGFsJykgLy8gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBmb2N1cyBsb29wCiAgICAub24oJ2ZvY3VzaW4uYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICh0aGlzLiRlbGVtZW50WzBdICE9PSBlLnRhcmdldCAmJiAhdGhpcy4kZWxlbWVudC5oYXMoZS50YXJnZXQpLmxlbmd0aCkgewogICAgICAgIHRoaXMuJGVsZW1lbnQuZm9jdXMoKTsKICAgICAgfQogICAgfSwgdGhpcykpOwogIH07CgogIE1vZGFsLnByb3RvdHlwZS5lc2NhcGUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5rZXlib2FyZCkgewogICAgICB0aGlzLiRlbGVtZW50Lm9uKCdrZXl1cC5kaXNtaXNzLmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlvbiAoZSkgewogICAgICAgIGUud2hpY2ggPT0gMjcgJiYgdGhpcy5oaWRlKCk7CiAgICAgIH0sIHRoaXMpKTsKICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93bikgewogICAgICB0aGlzLiRlbGVtZW50Lm9mZigna2V5dXAuZGlzbWlzcy5icy5tb2RhbCcpOwogICAgfQogIH07CgogIE1vZGFsLnByb3RvdHlwZS5oaWRlTW9kYWwgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB0aGlzLiRlbGVtZW50LmhpZGUoKTsKICAgIHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24gKCkgewogICAgICB0aGF0LnJlbW92ZUJhY2tkcm9wKCk7CiAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignaGlkZGVuLmJzLm1vZGFsJyk7CiAgICB9KTsKICB9OwoKICBNb2RhbC5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLiRiYWNrZHJvcCAmJiB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKTsKICAgIHRoaXMuJGJhY2tkcm9wID0gbnVsbDsKICB9OwoKICBNb2RhbC5wcm90b3R5cGUuYmFja2Ryb3AgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHZhciBhbmltYXRlID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID8gJ2ZhZGUnIDogJyc7CgogICAgaWYgKHRoaXMuaXNTaG93biAmJiB0aGlzLm9wdGlvbnMuYmFja2Ryb3ApIHsKICAgICAgdmFyIGRvQW5pbWF0ZSA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIGFuaW1hdGU7CiAgICAgIHRoaXMuJGJhY2tkcm9wID0gJCgnPGRpdiBjbGFzcz0ibW9kYWwtYmFja2Ryb3AgJyArIGFuaW1hdGUgKyAnIiAvPicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpOwogICAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLnRhcmdldCAhPT0gZS5jdXJyZW50VGFyZ2V0KSByZXR1cm47CiAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnID8gdGhpcy4kZWxlbWVudFswXS5mb2N1cy5jYWxsKHRoaXMuJGVsZW1lbnRbMF0pIDogdGhpcy5oaWRlLmNhbGwodGhpcyk7CiAgICAgIH0sIHRoaXMpKTsKICAgICAgaWYgKGRvQW5pbWF0ZSkgdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGg7IC8vIGZvcmNlIHJlZmxvdwoKICAgICAgdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoJ2luJyk7CiAgICAgIGlmICghY2FsbGJhY2spIHJldHVybjsKICAgICAgZG9BbmltYXRlID8gdGhpcy4kYmFja2Ryb3Aub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgY2FsbGJhY2spLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCkgOiBjYWxsYmFjaygpOwogICAgfSBlbHNlIGlmICghdGhpcy5pc1Nob3duICYmIHRoaXMuJGJhY2tkcm9wKSB7CiAgICAgIHRoaXMuJGJhY2tkcm9wLnJlbW92ZUNsYXNzKCdpbicpOwogICAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyB0aGlzLiRiYWNrZHJvcC5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBjYWxsYmFjaykuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKSA6IGNhbGxiYWNrKCk7CiAgICB9IGVsc2UgaWYgKGNhbGxiYWNrKSB7CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9CiAgfTsgLy8gTU9EQUwgUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQoKCiAgdmFyIG9sZCA9ICQuZm4ubW9kYWw7CgogICQuZm4ubW9kYWwgPSBmdW5jdGlvbiAob3B0aW9uLCBfcmVsYXRlZFRhcmdldCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnYnMubW9kYWwnKTsKICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTW9kYWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgX3R5cGVvZihvcHRpb24pID09ICdvYmplY3QnICYmIG9wdGlvbik7CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMubW9kYWwnLCBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIG9wdGlvbnMpKTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXShfcmVsYXRlZFRhcmdldCk7ZWxzZSBpZiAob3B0aW9ucy5zaG93KSBkYXRhLnNob3coX3JlbGF0ZWRUYXJnZXQpOwogICAgfSk7CiAgfTsKCiAgJC5mbi5tb2RhbC5Db25zdHJ1Y3RvciA9IE1vZGFsOyAvLyBNT0RBTCBOTyBDT05GTElDVAogIC8vID09PT09PT09PT09PT09PT09CgogICQuZm4ubW9kYWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4ubW9kYWwgPSBvbGQ7CiAgICByZXR1cm4gdGhpczsKICB9OyAvLyBNT0RBTCBEQVRBLUFQSQogIC8vID09PT09PT09PT09PT09CgoKICAkKGRvY3VtZW50KS5vbignY2xpY2suYnMubW9kYWwuZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlPSJtb2RhbCJdJywgZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICB2YXIgaHJlZiA9ICR0aGlzLmF0dHIoJ2hyZWYnKTsKICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IGhyZWYgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sICcnKSk7IC8vc3RyaXAgZm9yIGllNwoKICAgIHZhciBvcHRpb24gPSAkdGFyZ2V0LmRhdGEoJ2JzLm1vZGFsJykgPyAndG9nZ2xlJyA6ICQuZXh0ZW5kKHsKICAgICAgcmVtb3RlOiAhLyMvLnRlc3QoaHJlZikgJiYgaHJlZgogICAgfSwgJHRhcmdldC5kYXRhKCksICR0aGlzLmRhdGEoKSk7CiAgICBpZiAoJHRoaXMuaXMoJ2EnKSkgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgJHRhcmdldC5tb2RhbChvcHRpb24sIHRoaXMpLm9uZSgnaGlkZScsIGZ1bmN0aW9uICgpIHsKICAgICAgJHRoaXMuaXMoJzp2aXNpYmxlJykgJiYgJHRoaXMuZm9jdXMoKTsKICAgIH0pOwogIH0pOwogICQoZG9jdW1lbnQpLm9uKCdzaG93LmJzLm1vZGFsJywgJy5tb2RhbCcsIGZ1bmN0aW9uICgpIHsKICAgICQoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoJ21vZGFsLW9wZW4nKTsKICB9KS5vbignaGlkZGVuLmJzLm1vZGFsJywgJy5tb2RhbCcsIGZ1bmN0aW9uICgpIHsKICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTsKICB9KTsKfShqUXVlcnkpOwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQm9vdHN0cmFwOiB0b29sdGlwLmpzIHYzLjEuMQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0b29sdGlwCiAqIEluc3BpcmVkIGJ5IHRoZSBvcmlnaW5hbCBqUXVlcnkudGlwc3kgYnkgSmFzb24gRnJhbWUKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTQgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCitmdW5jdGlvbiAoJCkgewogICd1c2Ugc3RyaWN0JzsgLy8gVE9PTFRJUCBQVUJMSUMgQ0xBU1MgREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgdmFyIFRvb2x0aXAgPSBmdW5jdGlvbiBUb29sdGlwKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMudHlwZSA9IHRoaXMub3B0aW9ucyA9IHRoaXMuZW5hYmxlZCA9IHRoaXMudGltZW91dCA9IHRoaXMuaG92ZXJTdGF0ZSA9IHRoaXMuJGVsZW1lbnQgPSBudWxsOwogICAgdGhpcy5pbml0KCd0b29sdGlwJywgZWxlbWVudCwgb3B0aW9ucyk7CiAgfTsKCiAgVG9vbHRpcC5ERUZBVUxUUyA9IHsKICAgIGFuaW1hdGlvbjogdHJ1ZSwKICAgIHBsYWNlbWVudDogJ3RvcCcsCiAgICBzZWxlY3RvcjogZmFsc2UsCiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2PicsCiAgICB0cmlnZ2VyOiAnaG92ZXIgZm9jdXMnLAogICAgdGl0bGU6ICcnLAogICAgZGVsYXk6IDAsCiAgICBodG1sOiBmYWxzZSwKICAgIGNvbnRhaW5lcjogZmFsc2UKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMob3B0aW9ucyk7CiAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpOwoKICAgIGZvciAodmFyIGkgPSB0cmlnZ2Vycy5sZW5ndGg7IGktLTspIHsKICAgICAgdmFyIHRyaWdnZXIgPSB0cmlnZ2Vyc1tpXTsKCiAgICAgIGlmICh0cmlnZ2VyID09ICdjbGljaycpIHsKICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay4nICsgdGhpcy50eXBlLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsICQucHJveHkodGhpcy50b2dnbGUsIHRoaXMpKTsKICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9ICdtYW51YWwnKSB7CiAgICAgICAgdmFyIGV2ZW50SW4gPSB0cmlnZ2VyID09ICdob3ZlcicgPyAnbW91c2VlbnRlcicgOiAnZm9jdXNpbic7CiAgICAgICAgdmFyIGV2ZW50T3V0ID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2ZvY3Vzb3V0JzsKICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKGV2ZW50SW4gKyAnLicgKyB0aGlzLnR5cGUsIHRoaXMub3B0aW9ucy5zZWxlY3RvciwgJC5wcm94eSh0aGlzLmVudGVyLCB0aGlzKSk7CiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMub3B0aW9ucy5zZWxlY3RvciA/IHRoaXMuX29wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB7CiAgICAgIHRyaWdnZXI6ICdtYW51YWwnLAogICAgICBzZWxlY3RvcjogJycKICAgIH0pIDogdGhpcy5maXhUaXRsZSgpOwogIH07CgogIFRvb2x0aXAucHJvdG90eXBlLmdldERlZmF1bHRzID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFRvb2x0aXAuREVGQVVMVFM7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZ2V0RGVmYXVsdHMoKSwgdGhpcy4kZWxlbWVudC5kYXRhKCksIG9wdGlvbnMpOwoKICAgIGlmIChvcHRpb25zLmRlbGF5ICYmIHR5cGVvZiBvcHRpb25zLmRlbGF5ID09ICdudW1iZXInKSB7CiAgICAgIG9wdGlvbnMuZGVsYXkgPSB7CiAgICAgICAgc2hvdzogb3B0aW9ucy5kZWxheSwKICAgICAgICBoaWRlOiBvcHRpb25zLmRlbGF5CiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIG9wdGlvbnM7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9wdGlvbnMgPSB7fTsKICAgIHZhciBkZWZhdWx0cyA9IHRoaXMuZ2V0RGVmYXVsdHMoKTsKICAgIHRoaXMuX29wdGlvbnMgJiYgJC5lYWNoKHRoaXMuX29wdGlvbnMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7CiAgICAgIGlmIChkZWZhdWx0c1trZXldICE9IHZhbHVlKSBvcHRpb25zW2tleV0gPSB2YWx1ZTsKICAgIH0pOwogICAgcmV0dXJuIG9wdGlvbnM7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbiAob2JqKSB7CiAgICB2YXIgc2VsZiA9IG9iaiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3IgPyBvYmogOiAkKG9iai5jdXJyZW50VGFyZ2V0KVt0aGlzLnR5cGVdKHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpOwogICAgY2xlYXJUaW1lb3V0KHNlbGYudGltZW91dCk7CiAgICBzZWxmLmhvdmVyU3RhdGUgPSAnaW4nOwogICAgaWYgKCFzZWxmLm9wdGlvbnMuZGVsYXkgfHwgIXNlbGYub3B0aW9ucy5kZWxheS5zaG93KSByZXR1cm4gc2VsZi5zaG93KCk7CiAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHNlbGYuaG92ZXJTdGF0ZSA9PSAnaW4nKSBzZWxmLnNob3coKTsKICAgIH0sIHNlbGYub3B0aW9ucy5kZWxheS5zaG93KTsKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5sZWF2ZSA9IGZ1bmN0aW9uIChvYmopIHsKICAgIHZhciBzZWxmID0gb2JqIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvciA/IG9iaiA6ICQob2JqLmN1cnJlbnRUYXJnZXQpW3RoaXMudHlwZV0odGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSk7CiAgICBjbGVhclRpbWVvdXQoc2VsZi50aW1lb3V0KTsKICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdvdXQnOwogICAgaWYgKCFzZWxmLm9wdGlvbnMuZGVsYXkgfHwgIXNlbGYub3B0aW9ucy5kZWxheS5oaWRlKSByZXR1cm4gc2VsZi5oaWRlKCk7CiAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHNlbGYuaG92ZXJTdGF0ZSA9PSAnb3V0Jykgc2VsZi5oaWRlKCk7CiAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuaGlkZSk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBlID0gJC5FdmVudCgnc2hvdy5icy4nICsgdGhpcy50eXBlKTsKCiAgICBpZiAodGhpcy5oYXNDb250ZW50KCkgJiYgdGhpcy5lbmFibGVkKSB7CiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKTsKICAgICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgJHRpcCA9IHRoaXMudGlwKCk7CiAgICAgIHRoaXMuc2V0Q29udGVudCgpOwogICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbikgJHRpcC5hZGRDbGFzcygnZmFkZScpOwogICAgICB2YXIgcGxhY2VtZW50ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgPT0gJ2Z1bmN0aW9uJyA/IHRoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLCAkdGlwWzBdLCB0aGlzLiRlbGVtZW50WzBdKSA6IHRoaXMub3B0aW9ucy5wbGFjZW1lbnQ7CiAgICAgIHZhciBhdXRvVG9rZW4gPSAvXHM/YXV0bz9ccz8vaTsKICAgICAgdmFyIGF1dG9QbGFjZSA9IGF1dG9Ub2tlbi50ZXN0KHBsYWNlbWVudCk7CiAgICAgIGlmIChhdXRvUGxhY2UpIHBsYWNlbWVudCA9IHBsYWNlbWVudC5yZXBsYWNlKGF1dG9Ub2tlbiwgJycpIHx8ICd0b3AnOwogICAgICAkdGlwLmRldGFjaCgpLmNzcyh7CiAgICAgICAgdG9wOiAwLAogICAgICAgIGxlZnQ6IDAsCiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJwogICAgICB9KS5hZGRDbGFzcyhwbGFjZW1lbnQpOwogICAgICB0aGlzLm9wdGlvbnMuY29udGFpbmVyID8gJHRpcC5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKSA6ICR0aXAuaW5zZXJ0QWZ0ZXIodGhpcy4kZWxlbWVudCk7CiAgICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc2l0aW9uKCk7CiAgICAgIHZhciBhY3R1YWxXaWR0aCA9ICR0aXBbMF0ub2Zmc2V0V2lkdGg7CiAgICAgIHZhciBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodDsKCiAgICAgIGlmIChhdXRvUGxhY2UpIHsKICAgICAgICB2YXIgJHBhcmVudCA9IHRoaXMuJGVsZW1lbnQucGFyZW50KCk7CiAgICAgICAgdmFyIG9yZ1BsYWNlbWVudCA9IHBsYWNlbWVudDsKICAgICAgICB2YXIgZG9jU2Nyb2xsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICB2YXIgcGFyZW50V2lkdGggPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyID09ICdib2R5JyA/IHdpbmRvdy5pbm5lcldpZHRoIDogJHBhcmVudC5vdXRlcldpZHRoKCk7CiAgICAgICAgdmFyIHBhcmVudEhlaWdodCA9IHRoaXMub3B0aW9ucy5jb250YWluZXIgPT0gJ2JvZHknID8gd2luZG93LmlubmVySGVpZ2h0IDogJHBhcmVudC5vdXRlckhlaWdodCgpOwogICAgICAgIHZhciBwYXJlbnRMZWZ0ID0gdGhpcy5vcHRpb25zLmNvbnRhaW5lciA9PSAnYm9keScgPyAwIDogJHBhcmVudC5vZmZzZXQoKS5sZWZ0OwogICAgICAgIHBsYWNlbWVudCA9IHBsYWNlbWVudCA9PSAnYm90dG9tJyAmJiBwb3MudG9wICsgcG9zLmhlaWdodCArIGFjdHVhbEhlaWdodCAtIGRvY1Njcm9sbCA+IHBhcmVudEhlaWdodCA/ICd0b3AnIDogcGxhY2VtZW50ID09ICd0b3AnICYmIHBvcy50b3AgLSBkb2NTY3JvbGwgLSBhY3R1YWxIZWlnaHQgPCAwID8gJ2JvdHRvbScgOiBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAmJiBwb3MucmlnaHQgKyBhY3R1YWxXaWR0aCA+IHBhcmVudFdpZHRoID8gJ2xlZnQnIDogcGxhY2VtZW50ID09ICdsZWZ0JyAmJiBwb3MubGVmdCAtIGFjdHVhbFdpZHRoIDwgcGFyZW50TGVmdCA/ICdyaWdodCcgOiBwbGFjZW1lbnQ7CiAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyhvcmdQbGFjZW1lbnQpLmFkZENsYXNzKHBsYWNlbWVudCk7CiAgICAgIH0KCiAgICAgIHZhciBjYWxjdWxhdGVkT2Zmc2V0ID0gdGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KTsKICAgICAgdGhpcy5hcHBseVBsYWNlbWVudChjYWxjdWxhdGVkT2Zmc2V0LCBwbGFjZW1lbnQpOwogICAgICB0aGlzLmhvdmVyU3RhdGUgPSBudWxsOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdzaG93bi5icy4nICsgdGhhdC50eXBlKTsKICAgICAgfTsKCiAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJHRpcC5oYXNDbGFzcygnZmFkZScpID8gJHRpcC5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKSA6IGNvbXBsZXRlKCk7CiAgICB9CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQgPSBmdW5jdGlvbiAob2Zmc2V0LCBwbGFjZW1lbnQpIHsKICAgIHZhciByZXBsYWNlOwogICAgdmFyICR0aXAgPSB0aGlzLnRpcCgpOwogICAgdmFyIHdpZHRoID0gJHRpcFswXS5vZmZzZXRXaWR0aDsKICAgIHZhciBoZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodDsgLy8gbWFudWFsbHkgcmVhZCBtYXJnaW5zIGJlY2F1c2UgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGluY2x1ZGVzIGRpZmZlcmVuY2UKCiAgICB2YXIgbWFyZ2luVG9wID0gcGFyc2VJbnQoJHRpcC5jc3MoJ21hcmdpbi10b3AnKSwgMTApOwogICAgdmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApOyAvLyB3ZSBtdXN0IGNoZWNrIGZvciBOYU4gZm9yIGllIDgvOQoKICAgIGlmIChpc05hTihtYXJnaW5Ub3ApKSBtYXJnaW5Ub3AgPSAwOwogICAgaWYgKGlzTmFOKG1hcmdpbkxlZnQpKSBtYXJnaW5MZWZ0ID0gMDsKICAgIG9mZnNldC50b3AgPSBvZmZzZXQudG9wICsgbWFyZ2luVG9wOwogICAgb2Zmc2V0LmxlZnQgPSBvZmZzZXQubGVmdCArIG1hcmdpbkxlZnQ7IC8vICQuZm4ub2Zmc2V0IGRvZXNuJ3Qgcm91bmQgcGl4ZWwgdmFsdWVzCiAgICAvLyBzbyB3ZSB1c2Ugc2V0T2Zmc2V0IGRpcmVjdGx5IHdpdGggb3VyIG93biBmdW5jdGlvbiBCLTAKCiAgICAkLm9mZnNldC5zZXRPZmZzZXQoJHRpcFswXSwgJC5leHRlbmQoewogICAgICB1c2luZzogZnVuY3Rpb24gdXNpbmcocHJvcHMpIHsKICAgICAgICAkdGlwLmNzcyh7CiAgICAgICAgICB0b3A6IE1hdGgucm91bmQocHJvcHMudG9wKSwKICAgICAgICAgIGxlZnQ6IE1hdGgucm91bmQocHJvcHMubGVmdCkKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgb2Zmc2V0KSwgMCk7CiAgICAkdGlwLmFkZENsYXNzKCdpbicpOyAvLyBjaGVjayB0byBzZWUgaWYgcGxhY2luZyB0aXAgaW4gbmV3IG9mZnNldCBjYXVzZWQgdGhlIHRpcCB0byByZXNpemUgaXRzZWxmCgogICAgdmFyIGFjdHVhbFdpZHRoID0gJHRpcFswXS5vZmZzZXRXaWR0aDsKICAgIHZhciBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodDsKCiAgICBpZiAocGxhY2VtZW50ID09ICd0b3AnICYmIGFjdHVhbEhlaWdodCAhPSBoZWlnaHQpIHsKICAgICAgcmVwbGFjZSA9IHRydWU7CiAgICAgIG9mZnNldC50b3AgPSBvZmZzZXQudG9wICsgaGVpZ2h0IC0gYWN0dWFsSGVpZ2h0OwogICAgfQoKICAgIGlmICgvYm90dG9tfHRvcC8udGVzdChwbGFjZW1lbnQpKSB7CiAgICAgIHZhciBkZWx0YSA9IDA7CgogICAgICBpZiAob2Zmc2V0LmxlZnQgPCAwKSB7CiAgICAgICAgZGVsdGEgPSBvZmZzZXQubGVmdCAqIC0yOwogICAgICAgIG9mZnNldC5sZWZ0ID0gMDsKICAgICAgICAkdGlwLm9mZnNldChvZmZzZXQpOwogICAgICAgIGFjdHVhbFdpZHRoID0gJHRpcFswXS5vZmZzZXRXaWR0aDsKICAgICAgICBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodDsKICAgICAgfQoKICAgICAgdGhpcy5yZXBsYWNlQXJyb3coZGVsdGEgLSB3aWR0aCArIGFjdHVhbFdpZHRoLCBhY3R1YWxXaWR0aCwgJ2xlZnQnKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVwbGFjZUFycm93KGFjdHVhbEhlaWdodCAtIGhlaWdodCwgYWN0dWFsSGVpZ2h0LCAndG9wJyk7CiAgICB9CgogICAgaWYgKHJlcGxhY2UpICR0aXAub2Zmc2V0KG9mZnNldCk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUucmVwbGFjZUFycm93ID0gZnVuY3Rpb24gKGRlbHRhLCBkaW1lbnNpb24sIHBvc2l0aW9uKSB7CiAgICB0aGlzLmFycm93KCkuY3NzKHBvc2l0aW9uLCBkZWx0YSA/IDUwICogKDEgLSBkZWx0YSAvIGRpbWVuc2lvbikgKyAnJScgOiAnJyk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciAkdGlwID0gdGhpcy50aXAoKTsKICAgIHZhciB0aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKTsKICAgICR0aXAuZmluZCgnLnRvb2x0aXAtaW5uZXInKVt0aGlzLm9wdGlvbnMuaHRtbCA/ICdodG1sJyA6ICd0ZXh0J10odGl0bGUpOwogICAgJHRpcC5yZW1vdmVDbGFzcygnZmFkZSBpbiB0b3AgYm90dG9tIGxlZnQgcmlnaHQnKTsKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdmFyICR0aXAgPSB0aGlzLnRpcCgpOwogICAgdmFyIGUgPSAkLkV2ZW50KCdoaWRlLmJzLicgKyB0aGlzLnR5cGUpOwoKICAgIGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICBpZiAodGhhdC5ob3ZlclN0YXRlICE9ICdpbicpICR0aXAuZGV0YWNoKCk7CiAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcignaGlkZGVuLmJzLicgKyB0aGF0LnR5cGUpOwogICAgfQoKICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKTsKICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm47CiAgICAkdGlwLnJlbW92ZUNsYXNzKCdpbicpOwogICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kdGlwLmhhc0NsYXNzKCdmYWRlJykgPyAkdGlwLm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsIGNvbXBsZXRlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApIDogY29tcGxldGUoKTsKICAgIHRoaXMuaG92ZXJTdGF0ZSA9IG51bGw7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5maXhUaXRsZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnQ7CgogICAgaWYgKCRlLmF0dHIoJ3RpdGxlJykgfHwgdHlwZW9mICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnKSAhPSAnc3RyaW5nJykgewogICAgICAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgJGUuYXR0cigndGl0bGUnKSB8fCAnJykuYXR0cigndGl0bGUnLCAnJyk7CiAgICB9CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZWwgPSB0aGlzLiRlbGVtZW50WzBdOwogICAgcmV0dXJuICQuZXh0ZW5kKHt9LCB0eXBlb2YgZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09ICdmdW5jdGlvbicgPyBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IHsKICAgICAgd2lkdGg6IGVsLm9mZnNldFdpZHRoLAogICAgICBoZWlnaHQ6IGVsLm9mZnNldEhlaWdodAogICAgfSwgdGhpcy4kZWxlbWVudC5vZmZzZXQoKSk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldCA9IGZ1bmN0aW9uIChwbGFjZW1lbnQsIHBvcywgYWN0dWFsV2lkdGgsIGFjdHVhbEhlaWdodCkgewogICAgcmV0dXJuIHBsYWNlbWVudCA9PSAnYm90dG9tJyA/IHsKICAgICAgdG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCwKICAgICAgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggLyAyIC0gYWN0dWFsV2lkdGggLyAyCiAgICB9IDogcGxhY2VtZW50ID09ICd0b3AnID8gewogICAgICB0b3A6IHBvcy50b3AgLSBhY3R1YWxIZWlnaHQsCiAgICAgIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMgogICAgfSA6IHBsYWNlbWVudCA9PSAnbGVmdCcgPyB7CiAgICAgIHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwKICAgICAgbGVmdDogcG9zLmxlZnQgLSBhY3R1YWxXaWR0aAogICAgfSA6CiAgICAvKiBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAqLwogICAgewogICAgICB0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0IC8gMiAtIGFjdHVhbEhlaWdodCAvIDIsCiAgICAgIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoCiAgICB9OwogIH07CgogIFRvb2x0aXAucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHRpdGxlOwogICAgdmFyICRlID0gdGhpcy4kZWxlbWVudDsKICAgIHZhciBvID0gdGhpcy5vcHRpb25zOwogICAgdGl0bGUgPSAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJykgfHwgKHR5cGVvZiBvLnRpdGxlID09ICdmdW5jdGlvbicgPyBvLnRpdGxlLmNhbGwoJGVbMF0pIDogby50aXRsZSk7CiAgICByZXR1cm4gdGl0bGU7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUudGlwID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuJHRpcCA9IHRoaXMuJHRpcCB8fCAkKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy4kYXJyb3cgPSB0aGlzLiRhcnJvdyB8fCB0aGlzLnRpcCgpLmZpbmQoJy50b29sdGlwLWFycm93Jyk7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMuJGVsZW1lbnRbMF0ucGFyZW50Tm9kZSkgewogICAgICB0aGlzLmhpZGUoKTsKICAgICAgdGhpcy4kZWxlbWVudCA9IG51bGw7CiAgICAgIHRoaXMub3B0aW9ucyA9IG51bGw7CiAgICB9CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5lbmFibGVkID0gZmFsc2U7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZW5hYmxlZCA9ICF0aGlzLmVuYWJsZWQ7CiAgfTsKCiAgVG9vbHRpcC5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciBzZWxmID0gZSA/ICQoZS5jdXJyZW50VGFyZ2V0KVt0aGlzLnR5cGVdKHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpIDogdGhpczsKICAgIHNlbGYudGlwKCkuaGFzQ2xhc3MoJ2luJykgPyBzZWxmLmxlYXZlKHNlbGYpIDogc2VsZi5lbnRlcihzZWxmKTsKICB9OwoKICBUb29sdGlwLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICB0aGlzLmhpZGUoKS4kZWxlbWVudC5vZmYoJy4nICsgdGhpcy50eXBlKS5yZW1vdmVEYXRhKCdicy4nICsgdGhpcy50eXBlKTsKICB9OyAvLyBUT09MVElQIFBMVUdJTiBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQoKCiAgdmFyIG9sZCA9ICQuZm4udG9vbHRpcDsKCiAgJC5mbi50b29sdGlwID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnYnMudG9vbHRpcCcpOwogICAgICB2YXIgb3B0aW9ucyA9IF90eXBlb2Yob3B0aW9uKSA9PSAnb2JqZWN0JyAmJiBvcHRpb247CiAgICAgIGlmICghZGF0YSAmJiBvcHRpb24gPT0gJ2Rlc3Ryb3knKSByZXR1cm47CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudG9vbHRpcCcsIGRhdGEgPSBuZXcgVG9vbHRpcCh0aGlzLCBvcHRpb25zKSk7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTsKICAgIH0pOwogIH07CgogICQuZm4udG9vbHRpcC5Db25zdHJ1Y3RvciA9IFRvb2x0aXA7IC8vIFRPT0xUSVAgTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PT09CgogICQuZm4udG9vbHRpcC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbi50b29sdGlwID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKfShqUXVlcnkpOwovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQm9vdHN0cmFwOiBwb3BvdmVyLmpzIHYzLjEuMQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNwb3BvdmVycwogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBQT1BPVkVSIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIFBvcG92ZXIoZWxlbWVudCwgb3B0aW9ucykgewogICAgdGhpcy5pbml0KCdwb3BvdmVyJywgZWxlbWVudCwgb3B0aW9ucyk7CiAgfTsKCiAgaWYgKCEkLmZuLnRvb2x0aXApIHRocm93IG5ldyBFcnJvcignUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzJyk7CiAgUG9wb3Zlci5ERUZBVUxUUyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMsIHsKICAgIHBsYWNlbWVudDogJ3JpZ2h0JywKICAgIHRyaWdnZXI6ICdjbGljaycsCiAgICBjb250ZW50OiAnJywKICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz0icG9wb3ZlciI+PGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PjxoMyBjbGFzcz0icG9wb3Zlci10aXRsZSI+PC9oMz48ZGl2IGNsYXNzPSJwb3BvdmVyLWNvbnRlbnQiPjwvZGl2PjwvZGl2PicKICB9KTsgLy8gTk9URTogUE9QT1ZFUiBFWFRFTkRTIHRvb2x0aXAuanMKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKICBQb3BvdmVyLnByb3RvdHlwZSA9ICQuZXh0ZW5kKHt9LCAkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKTsKICBQb3BvdmVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBvcG92ZXI7CgogIFBvcG92ZXIucHJvdG90eXBlLmdldERlZmF1bHRzID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFBvcG92ZXIuREVGQVVMVFM7CiAgfTsKCiAgUG9wb3Zlci5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciAkdGlwID0gdGhpcy50aXAoKTsKICAgIHZhciB0aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKTsKICAgIHZhciBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50KCk7CiAgICAkdGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKTsKICAgICR0aXAuZmluZCgnLnBvcG92ZXItY29udGVudCcpWy8vIHdlIHVzZSBhcHBlbmQgZm9yIGh0bWwgb2JqZWN0cyB0byBtYWludGFpbiBqcyBldmVudHMKICAgIHRoaXMub3B0aW9ucy5odG1sID8gdHlwZW9mIGNvbnRlbnQgPT0gJ3N0cmluZycgPyAnaHRtbCcgOiAnYXBwZW5kJyA6ICd0ZXh0J10oY29udGVudCk7CiAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpbicpOyAvLyBJRTggZG9lc24ndCBhY2NlcHQgaGlkaW5nIHZpYSB0aGUgYDplbXB0eWAgcHNldWRvIHNlbGVjdG9yLCB3ZSBoYXZlIHRvIGRvCiAgICAvLyB0aGlzIG1hbnVhbGx5IGJ5IGNoZWNraW5nIHRoZSBjb250ZW50cy4KCiAgICBpZiAoISR0aXAuZmluZCgnLnBvcG92ZXItdGl0bGUnKS5odG1sKCkpICR0aXAuZmluZCgnLnBvcG92ZXItdGl0bGUnKS5oaWRlKCk7CiAgfTsKCiAgUG9wb3Zlci5wcm90b3R5cGUuaGFzQ29udGVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCkgfHwgdGhpcy5nZXRDb250ZW50KCk7CiAgfTsKCiAgUG9wb3Zlci5wcm90b3R5cGUuZ2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciAkZSA9IHRoaXMuJGVsZW1lbnQ7CiAgICB2YXIgbyA9IHRoaXMub3B0aW9uczsKICAgIHJldHVybiAkZS5hdHRyKCdkYXRhLWNvbnRlbnQnKSB8fCAodHlwZW9mIG8uY29udGVudCA9PSAnZnVuY3Rpb24nID8gby5jb250ZW50LmNhbGwoJGVbMF0pIDogby5jb250ZW50KTsKICB9OwoKICBQb3BvdmVyLnByb3RvdHlwZS5hcnJvdyA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLiRhcnJvdyA9IHRoaXMuJGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLmFycm93Jyk7CiAgfTsKCiAgUG9wb3Zlci5wcm90b3R5cGUudGlwID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLiR0aXApIHRoaXMuJHRpcCA9ICQodGhpcy5vcHRpb25zLnRlbXBsYXRlKTsKICAgIHJldHVybiB0aGlzLiR0aXA7CiAgfTsgLy8gUE9QT1ZFUiBQTFVHSU4gREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KCgogIHZhciBvbGQgPSAkLmZuLnBvcG92ZXI7CgogICQuZm4ucG9wb3ZlciA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoJ2JzLnBvcG92ZXInKTsKICAgICAgdmFyIG9wdGlvbnMgPSBfdHlwZW9mKG9wdGlvbikgPT0gJ29iamVjdCcgJiYgb3B0aW9uOwogICAgICBpZiAoIWRhdGEgJiYgb3B0aW9uID09ICdkZXN0cm95JykgcmV0dXJuOwogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnBvcG92ZXInLCBkYXRhID0gbmV3IFBvcG92ZXIodGhpcywgb3B0aW9ucykpOwogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCk7CiAgICB9KTsKICB9OwoKICAkLmZuLnBvcG92ZXIuQ29uc3RydWN0b3IgPSBQb3BvdmVyOyAvLyBQT1BPVkVSIE5PIENPTkZMSUNUCiAgLy8gPT09PT09PT09PT09PT09PT09PQoKICAkLmZuLnBvcG92ZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4ucG9wb3ZlciA9IG9sZDsKICAgIHJldHVybiB0aGlzOwogIH07Cn0oalF1ZXJ5KTsKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogc2Nyb2xsc3B5LmpzIHYzLjEuMQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNzY3JvbGxzcHkKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDExLTIwMTQgVHdpdHRlciwgSW5jLgogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCitmdW5jdGlvbiAoJCkgewogICd1c2Ugc3RyaWN0JzsgLy8gU0NST0xMU1BZIENMQVNTIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PQoKICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgb3B0aW9ucykgewogICAgdmFyIGhyZWY7CiAgICB2YXIgcHJvY2VzcyA9ICQucHJveHkodGhpcy5wcm9jZXNzLCB0aGlzKTsKICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpLmlzKCdib2R5JykgPyAkKHdpbmRvdykgOiAkKGVsZW1lbnQpOwogICAgdGhpcy4kYm9keSA9ICQoJ2JvZHknKTsKICAgIHRoaXMuJHNjcm9sbEVsZW1lbnQgPSB0aGlzLiRlbGVtZW50Lm9uKCdzY3JvbGwuYnMuc2Nyb2xsLXNweS5kYXRhLWFwaScsIHByb2Nlc3MpOwogICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIFNjcm9sbFNweS5ERUZBVUxUUywgb3B0aW9ucyk7CiAgICB0aGlzLnNlbGVjdG9yID0gKHRoaXMub3B0aW9ucy50YXJnZXQgfHwgKGhyZWYgPSAkKGVsZW1lbnQpLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sICcnKSAvL3N0cmlwIGZvciBpZTcKICAgIHx8ICcnKSArICcgLm5hdiBsaSA+IGEnOwogICAgdGhpcy5vZmZzZXRzID0gJChbXSk7CiAgICB0aGlzLnRhcmdldHMgPSAkKFtdKTsKICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gbnVsbDsKICAgIHRoaXMucmVmcmVzaCgpOwogICAgdGhpcy5wcm9jZXNzKCk7CiAgfQoKICBTY3JvbGxTcHkuREVGQVVMVFMgPSB7CiAgICBvZmZzZXQ6IDEwCiAgfTsKCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9mZnNldE1ldGhvZCA9IHRoaXMuJGVsZW1lbnRbMF0gPT0gd2luZG93ID8gJ29mZnNldCcgOiAncG9zaXRpb24nOwogICAgdGhpcy5vZmZzZXRzID0gJChbXSk7CiAgICB0aGlzLnRhcmdldHMgPSAkKFtdKTsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciAkdGFyZ2V0cyA9IHRoaXMuJGJvZHkuZmluZCh0aGlzLnNlbGVjdG9yKS5tYXAoZnVuY3Rpb24gKCkgewogICAgICB2YXIgJGVsID0gJCh0aGlzKTsKICAgICAgdmFyIGhyZWYgPSAkZWwuZGF0YSgndGFyZ2V0JykgfHwgJGVsLmF0dHIoJ2hyZWYnKTsKICAgICAgdmFyICRocmVmID0gL14jLi8udGVzdChocmVmKSAmJiAkKGhyZWYpOwogICAgICByZXR1cm4gJGhyZWYgJiYgJGhyZWYubGVuZ3RoICYmICRocmVmLmlzKCc6dmlzaWJsZScpICYmIFtbJGhyZWZbb2Zmc2V0TWV0aG9kXSgpLnRvcCArICghJC5pc1dpbmRvdyhzZWxmLiRzY3JvbGxFbGVtZW50LmdldCgwKSkgJiYgc2VsZi4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSksIGhyZWZdXSB8fCBudWxsOwogICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICByZXR1cm4gYVswXSAtIGJbMF07CiAgICB9KS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgc2VsZi5vZmZzZXRzLnB1c2godGhpc1swXSk7CiAgICAgIHNlbGYudGFyZ2V0cy5wdXNoKHRoaXNbMV0pOwogICAgfSk7CiAgfTsKCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkgKyB0aGlzLm9wdGlvbnMub2Zmc2V0OwogICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0IHx8IHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0OwogICAgdmFyIG1heFNjcm9sbCA9IHNjcm9sbEhlaWdodCAtIHRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KCk7CiAgICB2YXIgb2Zmc2V0cyA9IHRoaXMub2Zmc2V0czsKICAgIHZhciB0YXJnZXRzID0gdGhpcy50YXJnZXRzOwogICAgdmFyIGFjdGl2ZVRhcmdldCA9IHRoaXMuYWN0aXZlVGFyZ2V0OwogICAgdmFyIGk7CgogICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHsKICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldCAhPSAoaSA9IHRhcmdldHMubGFzdCgpWzBdKSAmJiB0aGlzLmFjdGl2YXRlKGkpOwogICAgfQoKICAgIGlmIChhY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDw9IG9mZnNldHNbMF0pIHsKICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldCAhPSAoaSA9IHRhcmdldHNbMF0pICYmIHRoaXMuYWN0aXZhdGUoaSk7CiAgICB9CgogICAgZm9yIChpID0gb2Zmc2V0cy5sZW5ndGg7IGktLTspIHsKICAgICAgYWN0aXZlVGFyZ2V0ICE9IHRhcmdldHNbaV0gJiYgc2Nyb2xsVG9wID49IG9mZnNldHNbaV0gJiYgKCFvZmZzZXRzW2kgKyAxXSB8fCBzY3JvbGxUb3AgPD0gb2Zmc2V0c1tpICsgMV0pICYmIHRoaXMuYWN0aXZhdGUodGFyZ2V0c1tpXSk7CiAgICB9CiAgfTsKCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIHRoaXMuYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0OwogICAgJCh0aGlzLnNlbGVjdG9yKS5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCwgJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yICsgJ1tkYXRhLXRhcmdldD0iJyArIHRhcmdldCArICciXSwnICsgdGhpcy5zZWxlY3RvciArICdbaHJlZj0iJyArIHRhcmdldCArICciXSc7CiAgICB2YXIgYWN0aXZlID0gJChzZWxlY3RvcikucGFyZW50cygnbGknKS5hZGRDbGFzcygnYWN0aXZlJyk7CgogICAgaWYgKGFjdGl2ZS5wYXJlbnQoJy5kcm9wZG93bi1tZW51JykubGVuZ3RoKSB7CiAgICAgIGFjdGl2ZSA9IGFjdGl2ZS5jbG9zZXN0KCdsaS5kcm9wZG93bicpLmFkZENsYXNzKCdhY3RpdmUnKTsKICAgIH0KCiAgICBhY3RpdmUudHJpZ2dlcignYWN0aXZhdGUuYnMuc2Nyb2xsc3B5Jyk7CiAgfTsgLy8gU0NST0xMU1BZIFBMVUdJTiBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09CgoKICB2YXIgb2xkID0gJC5mbi5zY3JvbGxzcHk7CgogICQuZm4uc2Nyb2xsc3B5ID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnYnMuc2Nyb2xsc3B5Jyk7CiAgICAgIHZhciBvcHRpb25zID0gX3R5cGVvZihvcHRpb24pID09ICdvYmplY3QnICYmIG9wdGlvbjsKICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5zY3JvbGxzcHknLCBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBvcHRpb25zKSk7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTsKICAgIH0pOwogIH07CgogICQuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yID0gU2Nyb2xsU3B5OyAvLyBTQ1JPTExTUFkgTk8gQ09ORkxJQ1QKICAvLyA9PT09PT09PT09PT09PT09PT09PT0KCiAgJC5mbi5zY3JvbGxzcHkubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uc2Nyb2xsc3B5ID0gb2xkOwogICAgcmV0dXJuIHRoaXM7CiAgfTsgLy8gU0NST0xMU1BZIERBVEEtQVBJCiAgLy8gPT09PT09PT09PT09PT09PT09CgoKICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAkKCdbZGF0YS1zcHk9InNjcm9sbCJdJykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkc3B5ID0gJCh0aGlzKTsKICAgICAgJHNweS5zY3JvbGxzcHkoJHNweS5kYXRhKCkpOwogICAgfSk7CiAgfSk7Cn0oalF1ZXJ5KTsKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIEJvb3RzdHJhcDogdGFiMi5qcyB2My4xLjEKICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdGFicwogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBUQUIgQ0xBU1MgREVGSU5JVElPTgogIC8vID09PT09PT09PT09PT09PT09PT09CgogIHZhciBUYWIgPSBmdW5jdGlvbiBUYWIoZWxlbWVudCkgewogICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTsKICB9OwoKICBUYWIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgJHRoaXMgPSB0aGlzLmVsZW1lbnQ7CiAgICB2YXIgJHVsID0gJHRoaXMuY2xvc2VzdCgndWw6bm90KC5kcm9wZG93bi1tZW51KScpOwogICAgdmFyIHNlbGVjdG9yID0gJHRoaXMuZGF0YSgndGFyZ2V0Jyk7CgogICAgaWYgKCFzZWxlY3RvcikgewogICAgICBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKTsKICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxzXSokKS8sICcnKTsgLy9zdHJpcCBmb3IgaWU3CiAgICB9CgogICAgaWYgKCR0aGlzLnBhcmVudCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVybjsKICAgIHZhciBwcmV2aW91cyA9ICR1bC5maW5kKCcuYWN0aXZlOmxhc3QgYScpWzBdOwogICAgdmFyIGUgPSAkLkV2ZW50KCdzaG93LmJzLnRhYicsIHsKICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXMKICAgIH0pOwogICAgJHRoaXMudHJpZ2dlcihlKTsKICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm47CiAgICB2YXIgJHRhcmdldCA9ICQoc2VsZWN0b3IpOwogICAgdGhpcy5hY3RpdmF0ZSgkdGhpcy5wYXJlbnQoJ2xpJyksICR1bCk7CiAgICB0aGlzLmFjdGl2YXRlKCR0YXJnZXQsICR0YXJnZXQucGFyZW50KCksIGZ1bmN0aW9uICgpIHsKICAgICAgJHRoaXMudHJpZ2dlcih7CiAgICAgICAgdHlwZTogJ3Nob3duLmJzLnRhYicsCiAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXMKICAgICAgfSk7CiAgICB9KTsKICB9OwoKICBUYWIucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAgIHZhciAkYWN0aXZlID0gY29udGFpbmVyLmZpbmQoJz4gLmFjdGl2ZScpOwogICAgdmFyIHRyYW5zaXRpb24gPSBjYWxsYmFjayAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJyk7CgogICAgZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJykuZmluZCgnPiAuZHJvcGRvd24tbWVudSA+IC5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpOwoKICAgICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgICBlbGVtZW50WzBdLm9mZnNldFdpZHRoOyAvLyByZWZsb3cgZm9yIHRyYW5zaXRpb24KCiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnaW4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlJyk7CiAgICAgIH0KCiAgICAgIGlmIChlbGVtZW50LnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKSkgewogICAgICAgIGVsZW1lbnQuY2xvc2VzdCgnbGkuZHJvcGRvd24nKS5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgIH0KCiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICB9CgogICAgdHJhbnNpdGlvbiA/ICRhY3RpdmUub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgbmV4dCkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKSA6IG5leHQoKTsKICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2luJyk7CiAgfTsgLy8gVEFCIFBMVUdJTiBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09CgoKICB2YXIgb2xkID0gJC5mbi50YWI7CgogICQuZm4udGFiID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnYnMudGFiJyk7CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudGFiJywgZGF0YSA9IG5ldyBUYWIodGhpcykpOwogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCk7CiAgICB9KTsKICB9OwoKICAkLmZuLnRhYi5Db25zdHJ1Y3RvciA9IFRhYjsgLy8gVEFCIE5PIENPTkZMSUNUCiAgLy8gPT09PT09PT09PT09PT09CgogICQuZm4udGFiLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLnRhYiA9IG9sZDsKICAgIHJldHVybiB0aGlzOwogIH07IC8vIFRBQiBEQVRBLUFQSQogIC8vID09PT09PT09PT09PQoKCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9InRhYiJdLCBbZGF0YS10b2dnbGU9InBpbGwiXScsIGZ1bmN0aW9uIChlKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAkKHRoaXMpLnRhYignc2hvdycpOwogIH0pOwp9KGpRdWVyeSk7Ci8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBCb290c3RyYXA6IGFmZml4LmpzIHYzLjEuMQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNhZmZpeAogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTEtMjAxNCBUd2l0dGVyLCBJbmMuCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKK2Z1bmN0aW9uICgkKSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyBBRkZJWCBDTEFTUyBERUZJTklUSU9OCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PQoKICB2YXIgQWZmaXggPSBmdW5jdGlvbiBBZmZpeChlbGVtZW50LCBvcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQWZmaXguREVGQVVMVFMsIG9wdGlvbnMpOwogICAgdGhpcy4kd2luZG93ID0gJCh3aW5kb3cpLm9uKCdzY3JvbGwuYnMuYWZmaXguZGF0YS1hcGknLCAkLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbiwgdGhpcykpLm9uKCdjbGljay5icy5hZmZpeC5kYXRhLWFwaScsICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCwgdGhpcykpOwogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB0aGlzLmFmZml4ZWQgPSB0aGlzLnVucGluID0gdGhpcy5waW5uZWRPZmZzZXQgPSBudWxsOwogICAgdGhpcy5jaGVja1Bvc2l0aW9uKCk7CiAgfTsKCiAgQWZmaXguUkVTRVQgPSAnYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbSc7CiAgQWZmaXguREVGQVVMVFMgPSB7CiAgICBvZmZzZXQ6IDAKICB9OwoKICBBZmZpeC5wcm90b3R5cGUuZ2V0UGlubmVkT2Zmc2V0ID0gZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMucGlubmVkT2Zmc2V0KSByZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ7CiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKS5hZGRDbGFzcygnYWZmaXgnKTsKICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLiR3aW5kb3cuc2Nyb2xsVG9wKCk7CiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLiRlbGVtZW50Lm9mZnNldCgpOwogICAgcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0ID0gcG9zaXRpb24udG9wIC0gc2Nyb2xsVG9wOwogIH07CgogIEFmZml4LnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCA9IGZ1bmN0aW9uICgpIHsKICAgIHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb24sIHRoaXMpLCAxKTsKICB9OwoKICBBZmZpeC5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkgcmV0dXJuOwogICAgdmFyIHNjcm9sbEhlaWdodCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpOwogICAgdmFyIHNjcm9sbFRvcCA9IHRoaXMuJHdpbmRvdy5zY3JvbGxUb3AoKTsKICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuJGVsZW1lbnQub2Zmc2V0KCk7CiAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vcHRpb25zLm9mZnNldDsKICAgIHZhciBvZmZzZXRUb3AgPSBvZmZzZXQudG9wOwogICAgdmFyIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b207CiAgICBpZiAodGhpcy5hZmZpeGVkID09ICd0b3AnKSBwb3NpdGlvbi50b3AgKz0gc2Nyb2xsVG9wOwogICAgaWYgKF90eXBlb2Yob2Zmc2V0KSAhPSAnb2JqZWN0Jykgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0VG9wID0gb2Zmc2V0OwogICAgaWYgKHR5cGVvZiBvZmZzZXRUb3AgPT0gJ2Z1bmN0aW9uJykgb2Zmc2V0VG9wID0gb2Zmc2V0LnRvcCh0aGlzLiRlbGVtZW50KTsKICAgIGlmICh0eXBlb2Ygb2Zmc2V0Qm90dG9tID09ICdmdW5jdGlvbicpIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b20odGhpcy4kZWxlbWVudCk7CiAgICB2YXIgYWZmaXggPSB0aGlzLnVucGluICE9IG51bGwgJiYgc2Nyb2xsVG9wICsgdGhpcy51bnBpbiA8PSBwb3NpdGlvbi50b3AgPyBmYWxzZSA6IG9mZnNldEJvdHRvbSAhPSBudWxsICYmIHBvc2l0aW9uLnRvcCArIHRoaXMuJGVsZW1lbnQuaGVpZ2h0KCkgPj0gc2Nyb2xsSGVpZ2h0IC0gb2Zmc2V0Qm90dG9tID8gJ2JvdHRvbScgOiBvZmZzZXRUb3AgIT0gbnVsbCAmJiBzY3JvbGxUb3AgPD0gb2Zmc2V0VG9wID8gJ3RvcCcgOiBmYWxzZTsKICAgIGlmICh0aGlzLmFmZml4ZWQgPT09IGFmZml4KSByZXR1cm47CiAgICBpZiAodGhpcy51bnBpbikgdGhpcy4kZWxlbWVudC5jc3MoJ3RvcCcsICcnKTsKICAgIHZhciBhZmZpeFR5cGUgPSAnYWZmaXgnICsgKGFmZml4ID8gJy0nICsgYWZmaXggOiAnJyk7CiAgICB2YXIgZSA9ICQuRXZlbnQoYWZmaXhUeXBlICsgJy5icy5hZmZpeCcpOwogICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpOwogICAgaWYgKGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybjsKICAgIHRoaXMuYWZmaXhlZCA9IGFmZml4OwogICAgdGhpcy51bnBpbiA9IGFmZml4ID09ICdib3R0b20nID8gdGhpcy5nZXRQaW5uZWRPZmZzZXQoKSA6IG51bGw7CiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKEFmZml4LlJFU0VUKS5hZGRDbGFzcyhhZmZpeFR5cGUpLnRyaWdnZXIoJC5FdmVudChhZmZpeFR5cGUucmVwbGFjZSgnYWZmaXgnLCAnYWZmaXhlZCcpKSk7CgogICAgaWYgKGFmZml4ID09ICdib3R0b20nKSB7CiAgICAgIHRoaXMuJGVsZW1lbnQub2Zmc2V0KHsKICAgICAgICB0b3A6IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSAtIHRoaXMuJGVsZW1lbnQuaGVpZ2h0KCkKICAgICAgfSk7CiAgICB9CiAgfTsgLy8gQUZGSVggUExVR0lOIERFRklOSVRJT04KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQoKCiAgdmFyIG9sZCA9ICQuZm4uYWZmaXg7CgogICQuZm4uYWZmaXggPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKCdicy5hZmZpeCcpOwogICAgICB2YXIgb3B0aW9ucyA9IF90eXBlb2Yob3B0aW9uKSA9PSAnb2JqZWN0JyAmJiBvcHRpb247CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWZmaXgnLCBkYXRhID0gbmV3IEFmZml4KHRoaXMsIG9wdGlvbnMpKTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpOwogICAgfSk7CiAgfTsKCiAgJC5mbi5hZmZpeC5Db25zdHJ1Y3RvciA9IEFmZml4OyAvLyBBRkZJWCBOTyBDT05GTElDVAogIC8vID09PT09PT09PT09PT09PT09CgogICQuZm4uYWZmaXgubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uYWZmaXggPSBvbGQ7CiAgICByZXR1cm4gdGhpczsKICB9OyAvLyBBRkZJWCBEQVRBLUFQSQogIC8vID09PT09PT09PT09PT09CgoKICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAkKCdbZGF0YS1zcHk9ImFmZml4Il0nKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICRzcHkgPSAkKHRoaXMpOwogICAgICB2YXIgZGF0YSA9ICRzcHkuZGF0YSgpOwogICAgICBkYXRhLm9mZnNldCA9IGRhdGEub2Zmc2V0IHx8IHt9OwogICAgICBpZiAoZGF0YS5vZmZzZXRCb3R0b20pIGRhdGEub2Zmc2V0LmJvdHRvbSA9IGRhdGEub2Zmc2V0Qm90dG9tOwogICAgICBpZiAoZGF0YS5vZmZzZXRUb3ApIGRhdGEub2Zmc2V0LnRvcCA9IGRhdGEub2Zmc2V0VG9wOwogICAgICAkc3B5LmFmZml4KGRhdGEpOwogICAgfSk7CiAgfSk7Cn0oalF1ZXJ5KTs="},{"version":3,"sources":["F:/Web_design/item/src/assets/promanage/js/bootstrap.js"],"names":["jQuery","Error","$","transitionEnd","el","document","createElement","transEndEventNames","name","style","undefined","end","fn","emulateTransitionEnd","duration","called","$el","one","support","transition","callback","trigger","setTimeout","dismiss","Alert","on","close","prototype","e","$this","selector","attr","replace","$parent","preventDefault","length","hasClass","parent","Event","isDefaultPrevented","removeClass","removeElement","remove","old","alert","option","each","data","call","Constructor","noConflict","Button","element","options","$element","extend","DEFAULTS","isLoading","loadingText","setState","state","d","val","is","resetText","proxy","addClass","removeAttr","toggle","changed","closest","$input","find","prop","toggleClass","button","$btn","target","Carousel","$indicators","paused","sliding","interval","$active","$items","pause","cycle","wrap","clearInterval","setInterval","next","getActiveIndex","children","index","to","pos","that","activeIndex","slide","prev","type","$next","isCycling","direction","fallback","relatedTarget","$nextIndicator","offsetWidth","join","css","slice","carousel","action","href","$target","slideIndex","window","$carousel","Collapse","transitioning","dimension","hasWidth","show","startEvent","actives","hasData","collapse","complete","scrollSize","camelCase","hide","offsetHeight","not","backdrop","Dropdown","getParent","isActive","clearMenus","documentElement","insertAfter","focus","keydown","test","keyCode","stopPropagation","which","click","desc","filter","eq","dropdown","Modal","$backdrop","isShown","remote","load","keyboard","_relatedTarget","escape","appendTo","body","scrollTop","enforceFocus","off","hideModal","has","removeBackdrop","animate","doAnimate","currentTarget","modal","Tooltip","enabled","timeout","hoverState","init","animation","placement","template","title","delay","html","container","getOptions","triggers","split","i","eventIn","eventOut","enter","leave","_options","fixTitle","getDefaults","getDelegateOptions","defaults","key","value","obj","self","constructor","clearTimeout","hasContent","$tip","tip","setContent","autoToken","autoPlace","detach","top","left","display","getPosition","actualWidth","actualHeight","orgPlacement","docScroll","parentWidth","innerWidth","outerWidth","parentHeight","innerHeight","outerHeight","parentLeft","offset","height","right","calculatedOffset","getCalculatedOffset","applyPlacement","width","marginTop","parseInt","marginLeft","isNaN","setOffset","using","props","Math","round","delta","replaceArrow","position","arrow","getTitle","$e","getBoundingClientRect","o","$arrow","validate","parentNode","enable","disable","toggleEnabled","destroy","removeData","tooltip","Popover","content","getContent","popover","ScrollSpy","process","$body","$scrollElement","offsets","targets","activeTarget","refresh","offsetMethod","$targets","map","$href","isWindow","get","sort","a","b","push","scrollHeight","maxScroll","last","activate","parentsUntil","active","parents","scrollspy","$spy","Tab","$ul","previous","tab","Affix","$window","checkPosition","checkPositionWithEventLoop","affixed","unpin","pinnedOffset","RESET","getPinnedOffset","offsetTop","offsetBottom","bottom","affix","affixType"],"mappings":"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","sourcesContent":["/*!\n * Bootstrap v3.1.1 (http://getbootstrap.com)\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n\nif (typeof jQuery === 'undefined') { throw new Error('Bootstrap\\'s JavaScript requires jQuery') }\n\n/* ========================================================================\n * Bootstrap: transition.js v3.1.1\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      'WebkitTransition' : 'webkitTransitionEnd',\n      'MozTransition'    : 'transitionend',\n      'OTransition'      : 'oTransitionEnd otransitionend',\n      'transition'       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false, $el = this\n    $(this).one($.support.transition.end, function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: alert.js v3.1.1\n * http://getbootstrap.com/javascript/#alerts\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // ALERT CLASS DEFINITION\n  // ======================\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n  var Alert   = function (el) {\n    $(el).on('click', dismiss, this.close)\n  }\n\n  Alert.prototype.close = function (e) {\n    var $this    = $(this)\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = $(selector)\n\n    if (e) e.preventDefault()\n\n    if (!$parent.length) {\n      $parent = $this.hasClass('alert') ? $this : $this.parent()\n    }\n\n    $parent.trigger(e = $.Event('close.bs.alert'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      $parent.trigger('closed.bs.alert').remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent\n        .one($.support.transition.end, removeElement)\n        .emulateTransitionEnd(150) :\n      removeElement()\n  }\n\n\n  // ALERT PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.alert\n\n  $.fn.alert = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.alert')\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.alert.Constructor = Alert\n\n\n  // ALERT NO CONFLICT\n  // =================\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n  // ALERT DATA-API\n  // ==============\n\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: button.js v3.1.1\n * http://getbootstrap.com/javascript/#buttons\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element  = $(element)\n    this.options   = $.extend({}, Button.DEFAULTS, options)\n    this.isLoading = false\n  }\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state = state + 'Text'\n\n    if (!data.resetText) $el.data('resetText', $el[val]())\n\n    $el[val](data[state] || this.options[state])\n\n    // push to event loop to allow forms to submit\n    setTimeout($.proxy(function () {\n      if (state == 'loadingText') {\n        this.isLoading = true\n        $el.addClass(d).attr(d, d)\n      } else if (this.isLoading) {\n        this.isLoading = false\n        $el.removeClass(d).removeAttr(d)\n      }\n    }, this), 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var changed = true\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n      if ($input.prop('type') == 'radio') {\n        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false\n        else $parent.find('.active').removeClass('active')\n      }\n      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')\n    }\n\n    if (changed) this.$element.toggleClass('active')\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  var old = $.fn.button\n\n  $.fn.button = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document).on('click.bs.button.data-api', '[data-toggle^=button]', function (e) {\n    var $btn = $(e.target)\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n    $btn.button('toggle')\n    e.preventDefault()\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: carousel.js v3.1.1\n * http://getbootstrap.com/javascript/#carousel\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CAROUSEL CLASS DEFINITION\n  // =========================\n\n  var Carousel = function (element, options) {\n    this.$element    = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options     = options\n    this.paused      =\n    this.sliding     =\n    this.interval    =\n    this.$active     =\n    this.$items      = null\n\n    this.options.pause == 'hover' && this.$element\n      .on('mouseenter', $.proxy(this.pause, this))\n      .on('mouseleave', $.proxy(this.cycle, this))\n  }\n\n  Carousel.DEFAULTS = {\n    interval: 5000,\n    pause: 'hover',\n    wrap: true\n  }\n\n  Carousel.prototype.cycle =  function (e) {\n    e || (this.paused = false)\n\n    this.interval && clearInterval(this.interval)\n\n    this.options.interval\n      && !this.paused\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n\n    return this\n  }\n\n  Carousel.prototype.getActiveIndex = function () {\n    this.$active = this.$element.find('.item.active')\n    this.$items  = this.$active.parent().children()\n\n    return this.$items.index(this.$active)\n  }\n\n  Carousel.prototype.to = function (pos) {\n    var that        = this\n    var activeIndex = this.getActiveIndex()\n\n    if (pos > (this.$items.length - 1) || pos < 0) return\n\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) })\n    if (activeIndex == pos) return this.pause().cycle()\n\n    return this.slide(pos > activeIndex ? 'next' : 'prev', $(this.$items[pos]))\n  }\n\n  Carousel.prototype.pause = function (e) {\n    e || (this.paused = true)\n\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\n      this.$element.trigger($.support.transition.end)\n      this.cycle(true)\n    }\n\n    this.interval = clearInterval(this.interval)\n\n    return this\n  }\n\n  Carousel.prototype.next = function () {\n    if (this.sliding) return\n    return this.slide('next')\n  }\n\n  Carousel.prototype.prev = function () {\n    if (this.sliding) return\n    return this.slide('prev')\n  }\n\n  Carousel.prototype.slide = function (type, next) {\n    var $active   = this.$element.find('.item.active')\n    var $next     = next || $active[type]()\n    var isCycling = this.interval\n    var direction = type == 'next' ? 'left' : 'right'\n    var fallback  = type == 'next' ? 'first' : 'last'\n    var that      = this\n\n    if (!$next.length) {\n      if (!this.options.wrap) return\n      $next = this.$element.find('.item')[fallback]()\n    }\n\n    if ($next.hasClass('active')) return this.sliding = false\n\n    var e = $.Event('slide.bs.carousel', { relatedTarget: $next[0], direction: direction })\n    this.$element.trigger(e)\n    if (e.isDefaultPrevented()) return\n\n    this.sliding = true\n\n    isCycling && this.pause()\n\n    if (this.$indicators.length) {\n      this.$indicators.find('.active').removeClass('active')\n      this.$element.one('slid.bs.carousel', function () {\n        var $nextIndicator = $(that.$indicators.children()[that.getActiveIndex()])\n        $nextIndicator && $nextIndicator.addClass('active')\n      })\n    }\n\n    if ($.support.transition && this.$element.hasClass('slide')) {\n      $next.addClass(type)\n      $next[0].offsetWidth // force reflow\n      $active.addClass(direction)\n      $next.addClass(direction)\n      $active\n        .one($.support.transition.end, function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () { that.$element.trigger('slid.bs.carousel') }, 0)\n        })\n        .emulateTransitionEnd($active.css('transition-duration').slice(0, -1) * 1000)\n    } else {\n      $active.removeClass('active')\n      $next.addClass('active')\n      this.sliding = false\n      this.$element.trigger('slid.bs.carousel')\n    }\n\n    isCycling && this.cycle()\n\n    return this\n  }\n\n\n  // CAROUSEL PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.carousel\n\n  $.fn.carousel = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.carousel')\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n      var action  = typeof option == 'string' ? option : options.slide\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  $.fn.carousel.Constructor = Carousel\n\n\n  // CAROUSEL NO CONFLICT\n  // ====================\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n\n  // CAROUSEL DATA-API\n  // =================\n\n  $(document).on('click.bs.carousel.data-api', '[data-slide], [data-slide-to]', function (e) {\n    var $this   = $(this), href\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n    var options = $.extend({}, $target.data(), $this.data())\n    var slideIndex = $this.attr('data-slide-to')\n    if (slideIndex) options.interval = false\n\n    $target.carousel(options)\n\n    if (slideIndex = $this.attr('data-slide-to')) {\n      $target.data('bs.carousel').to(slideIndex)\n    }\n\n    e.preventDefault()\n  })\n\n  $(window).on('load', function () {\n    $('[data-ride=\"carousel\"]').each(function () {\n      var $carousel = $(this)\n      $carousel.carousel($carousel.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.1.1\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = function (element, options) {\n    this.$element      = $(element)\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\n    this.transitioning = null\n\n    if (this.options.parent) this.$parent = $(this.options.parent)\n    if (this.options.toggle) this.toggle()\n  }\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n  Collapse.prototype.dimension = function () {\n    var hasWidth = this.$element.hasClass('width')\n    return hasWidth ? 'width' : 'height'\n  }\n\n  Collapse.prototype.show = function () {\n    if (this.transitioning || this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('show.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var actives = this.$parent && this.$parent.find('> .panel > .in')\n\n    if (actives && actives.length) {\n      var hasData = actives.data('bs.collapse')\n      if (hasData && hasData.transitioning) return\n      actives.collapse('hide')\n      hasData || actives.data('bs.collapse', null)\n    }\n\n    var dimension = this.dimension()\n\n    this.$element\n      .removeClass('collapse')\n      .addClass('collapsing')\n      [dimension](0)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse in')\n        [dimension]('auto')\n      this.transitioning = 0\n      this.$element.trigger('shown.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\n\n    this.$element\n      .one($.support.transition.end, $.proxy(complete, this))\n      .emulateTransitionEnd(350)\n      [dimension](this.$element[0][scrollSize])\n  }\n\n  Collapse.prototype.hide = function () {\n    if (this.transitioning || !this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('hide.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var dimension = this.dimension()\n\n    this.$element\n      [dimension](this.$element[dimension]())\n      [0].offsetHeight\n\n    this.$element\n      .addClass('collapsing')\n      .removeClass('collapse')\n      .removeClass('in')\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.transitioning = 0\n      this.$element\n        .trigger('hidden.bs.collapse')\n        .removeClass('collapsing')\n        .addClass('collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    this.$element\n      [dimension](0)\n      .one($.support.transition.end, $.proxy(complete, this))\n      .emulateTransitionEnd(350)\n  }\n\n  Collapse.prototype.toggle = function () {\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.collapse\n\n  $.fn.collapse = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && option == 'show') option = !option\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.collapse.Constructor = Collapse\n\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=collapse]', function (e) {\n    var $this   = $(this), href\n    var target  = $this.attr('data-target')\n        || e.preventDefault()\n        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') //strip for ie7\n    var $target = $(target)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n    var parent  = $this.attr('data-parent')\n    var $parent = parent && $(parent)\n\n    if (!data || !data.transitioning) {\n      if ($parent) $parent.find('[data-toggle=collapse][data-parent=\"' + parent + '\"]').not($this).addClass('collapsed')\n      $this[$target.hasClass('in') ? 'addClass' : 'removeClass']('collapsed')\n    }\n\n    $target.collapse(option)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: dropdown.js v3.1.1\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=dropdown]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $('<div class=\"dropdown-backdrop\"/>').insertAfter($(this)).on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $parent\n        .toggleClass('open')\n        .trigger('shown.bs.dropdown', relatedTarget)\n\n      $this.focus()\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27)/.test(e.keyCode)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive || (isActive && e.keyCode == 27)) {\n      if (e.which == 27) $parent.find(toggle).focus()\n      return $this.click()\n    }\n\n    var desc = ' li:not(.divider):visible a'\n    var $items = $parent.find('[role=menu]' + desc + ', [role=listbox]' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index($items.filter(':focus'))\n\n    if (e.keyCode == 38 && index > 0)                 index--                        // up\n    if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n    if (!~index)                                      index = 0\n\n    $items.eq(index).focus()\n  }\n\n  function clearMenus(e) {\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $parent = getParent($(this))\n      var relatedTarget = { relatedTarget: this }\n      if (!$parent.hasClass('open')) return\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n      if (e.isDefaultPrevented()) return\n      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle + ', [role=menu], [role=listbox]', Dropdown.prototype.keydown)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: modal.js v3.1.1\n * http://getbootstrap.com/javascript/#modals\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options   = options\n    this.$element  = $(element)\n    this.$backdrop =\n    this.isShown   = null\n\n    if (this.options.remote) {\n      this.$element\n        .find('.modal-content')\n        .load(this.options.remote, $.proxy(function () {\n          this.$element.trigger('loaded.bs.modal')\n        }, this))\n    }\n  }\n\n  Modal.DEFAULTS = {\n    backdrop: true,\n    keyboard: true,\n    show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this[!this.isShown ? 'show' : 'hide'](_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.escape()\n\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(document.body) // don't move modals dom position\n      }\n\n      that.$element\n        .show()\n        .scrollTop(0)\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element\n        .addClass('in')\n        .attr('aria-hidden', false)\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$element.find('.modal-dialog') // wait for modal to slide in\n          .one($.support.transition.end, function () {\n            that.$element.focus().trigger(e)\n          })\n          .emulateTransitionEnd(300) :\n        that.$element.focus().trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .attr('aria-hidden', true)\n      .off('click.dismiss.bs.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one($.support.transition.end, $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(300) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {\n          this.$element.focus()\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keyup.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keyup.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.removeBackdrop()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n        .appendTo(document.body)\n\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus.call(this.$element[0])\n          : this.hide.call(this)\n      }, this))\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.modal\n\n  $.fn.modal = function (option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    if ($this.is('a')) e.preventDefault()\n\n    $target\n      .modal(option, this)\n      .one('hide', function () {\n        $this.is(':visible') && $this.focus()\n      })\n  })\n\n  $(document)\n    .on('show.bs.modal', '.modal', function () { $(document.body).addClass('modal-open') })\n    .on('hidden.bs.modal', '.modal', function () { $(document.body).removeClass('modal-open') })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tooltip.js v3.1.1\n * http://getbootstrap.com/javascript/#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       =\n    this.options    =\n    this.enabled    =\n    this.timeout    =\n    this.hoverState =\n    this.$element   = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n    html: false,\n    container: false\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled  = true\n    this.type     = type\n    this.$element = $(element)\n    this.options  = this.getOptions(options)\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay,\n        hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n      var that = this;\n\n      var $tip = this.tip()\n\n      this.setContent()\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var $parent = this.$element.parent()\n\n        var orgPlacement = placement\n        var docScroll    = document.documentElement.scrollTop || document.body.scrollTop\n        var parentWidth  = this.options.container == 'body' ? window.innerWidth  : $parent.outerWidth()\n        var parentHeight = this.options.container == 'body' ? window.innerHeight : $parent.outerHeight()\n        var parentLeft   = this.options.container == 'body' ? 0 : $parent.offset().left\n\n        placement = placement == 'bottom' && pos.top   + pos.height  + actualHeight - docScroll > parentHeight  ? 'top'    :\n                    placement == 'top'    && pos.top   - docScroll   - actualHeight < 0                         ? 'bottom' :\n                    placement == 'right'  && pos.right + actualWidth > parentWidth                              ? 'left'   :\n                    placement == 'left'   && pos.left  - actualWidth < parentLeft                               ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n      this.hoverState = null\n\n      var complete = function() {\n        that.$element.trigger('shown.bs.' + that.type)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one($.support.transition.end, complete)\n          .emulateTransitionEnd(150) :\n        complete()\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\n    var replace\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  = offset.top  + marginTop\n    offset.left = offset.left + marginLeft\n\n    // $.fn.offset doesn't round pixel values\n    // so we use setOffset directly with our own function B-0\n    $.offset.setOffset($tip[0], $.extend({\n      using: function (props) {\n        $tip.css({\n          top: Math.round(props.top),\n          left: Math.round(props.left)\n        })\n      }\n    }, offset), 0)\n\n    $tip.addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      replace = true\n      offset.top = offset.top + height - actualHeight\n    }\n\n    if (/bottom|top/.test(placement)) {\n      var delta = 0\n\n      if (offset.left < 0) {\n        delta       = offset.left * -2\n        offset.left = 0\n\n        $tip.offset(offset)\n\n        actualWidth  = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n      }\n\n      this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\n    } else {\n      this.replaceArrow(actualHeight - height, actualHeight, 'top')\n    }\n\n    if (replace) $tip.offset(offset)\n  }\n\n  Tooltip.prototype.replaceArrow = function (delta, dimension, position) {\n    this.arrow().css(position, delta ? (50 * (1 - delta / dimension) + '%') : '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function () {\n    var that = this\n    var $tip = this.tip()\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n      that.$element.trigger('hidden.bs.' + that.type)\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && this.$tip.hasClass('fade') ?\n      $tip\n        .one($.support.transition.end, complete)\n        .emulateTransitionEnd(150) :\n      complete()\n\n    this.hoverState = null\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function () {\n    var el = this.$element[0]\n    return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    }, this.$element.offset())\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.tip = function () {\n    return this.$tip = this.$tip || $(this.options.template)\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow')\n  }\n\n  Tooltip.prototype.validate = function () {\n    if (!this.$element[0].parentNode) {\n      this.hide()\n      this.$element = null\n      this.options  = null\n    }\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = e ? $(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type) : this\n    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n  }\n\n  Tooltip.prototype.destroy = function () {\n    clearTimeout(this.timeout)\n    this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data && option == 'destroy') return\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: popover.js v3.1.1\n * http://getbootstrap.com/javascript/#popovers\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // POPOVER PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\n\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\n    placement: 'right',\n    trigger: 'click',\n    content: '',\n    template: '<div class=\"popover\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n  // NOTE: POPOVER EXTENDS tooltip.js\n  // ================================\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\n\n  Popover.prototype.constructor = Popover\n\n  Popover.prototype.getDefaults = function () {\n    return Popover.DEFAULTS\n  }\n\n  Popover.prototype.setContent = function () {\n    var $tip    = this.tip()\n    var title   = this.getTitle()\n    var content = this.getContent()\n\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n    $tip.find('.popover-content')[ // we use append for html objects to maintain js events\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\n    ](content)\n\n    $tip.removeClass('fade top bottom left right in')\n\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\n    // this manually by checking the contents.\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\n  }\n\n  Popover.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent()\n  }\n\n  Popover.prototype.getContent = function () {\n    var $e = this.$element\n    var o  = this.options\n\n    return $e.attr('data-content')\n      || (typeof o.content == 'function' ?\n            o.content.call($e[0]) :\n            o.content)\n  }\n\n  Popover.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find('.arrow')\n  }\n\n  Popover.prototype.tip = function () {\n    if (!this.$tip) this.$tip = $(this.options.template)\n    return this.$tip\n  }\n\n\n  // POPOVER PLUGIN DEFINITION\n  // =========================\n\n  var old = $.fn.popover\n\n  $.fn.popover = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.popover')\n      var options = typeof option == 'object' && option\n\n      if (!data && option == 'destroy') return\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.popover.Constructor = Popover\n\n\n  // POPOVER NO CONFLICT\n  // ===================\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: scrollspy.js v3.1.1\n * http://getbootstrap.com/javascript/#scrollspy\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // SCROLLSPY CLASS DEFINITION\n  // ==========================\n\n  function ScrollSpy(element, options) {\n    var href\n    var process  = $.proxy(this.process, this)\n\n    this.$element       = $(element).is('body') ? $(window) : $(element)\n    this.$body          = $('body')\n    this.$scrollElement = this.$element.on('scroll.bs.scroll-spy.data-api', process)\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\n    this.selector       = (this.options.target\n      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      || '') + ' .nav li > a'\n    this.offsets        = $([])\n    this.targets        = $([])\n    this.activeTarget   = null\n\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.DEFAULTS = {\n    offset: 10\n  }\n\n  ScrollSpy.prototype.refresh = function () {\n    var offsetMethod = this.$element[0] == window ? 'offset' : 'position'\n\n    this.offsets = $([])\n    this.targets = $([])\n\n    var self     = this\n    var $targets = this.$body\n      .find(this.selector)\n      .map(function () {\n        var $el   = $(this)\n        var href  = $el.data('target') || $el.attr('href')\n        var $href = /^#./.test(href) && $(href)\n\n        return ($href\n          && $href.length\n          && $href.is(':visible')\n          && [[ $href[offsetMethod]().top + (!$.isWindow(self.$scrollElement.get(0)) && self.$scrollElement.scrollTop()), href ]]) || null\n      })\n      .sort(function (a, b) { return a[0] - b[0] })\n      .each(function () {\n        self.offsets.push(this[0])\n        self.targets.push(this[1])\n      })\n  }\n\n  ScrollSpy.prototype.process = function () {\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\n    var scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\n    var maxScroll    = scrollHeight - this.$scrollElement.height()\n    var offsets      = this.offsets\n    var targets      = this.targets\n    var activeTarget = this.activeTarget\n    var i\n\n    if (scrollTop >= maxScroll) {\n      return activeTarget != (i = targets.last()[0]) && this.activate(i)\n    }\n\n    if (activeTarget && scrollTop <= offsets[0]) {\n      return activeTarget != (i = targets[0]) && this.activate(i)\n    }\n\n    for (i = offsets.length; i--;) {\n      activeTarget != targets[i]\n        && scrollTop >= offsets[i]\n        && (!offsets[i + 1] || scrollTop <= offsets[i + 1])\n        && this.activate( targets[i] )\n    }\n  }\n\n  ScrollSpy.prototype.activate = function (target) {\n    this.activeTarget = target\n\n    $(this.selector)\n      .parentsUntil(this.options.target, '.active')\n      .removeClass('active')\n\n    var selector = this.selector +\n        '[data-target=\"' + target + '\"],' +\n        this.selector + '[href=\"' + target + '\"]'\n\n    var active = $(selector)\n      .parents('li')\n      .addClass('active')\n\n    if (active.parent('.dropdown-menu').length) {\n      active = active\n        .closest('li.dropdown')\n        .addClass('active')\n    }\n\n    active.trigger('activate.bs.scrollspy')\n  }\n\n\n  // SCROLLSPY PLUGIN DEFINITION\n  // ===========================\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.scrollspy')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n\n  // SCROLLSPY NO CONFLICT\n  // =====================\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n  // SCROLLSPY DATA-API\n  // ==================\n\n  $(window).on('load', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      $spy.scrollspy($spy.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tab2.js v3.1.1\n * http://getbootstrap.com/javascript/#tabs\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TAB CLASS DEFINITION\n  // ====================\n\n  var Tab = function (element) {\n    this.element = $(element)\n  }\n\n  Tab.prototype.show = function () {\n    var $this    = this.element\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\n    var selector = $this.data('target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    if ($this.parent('li').hasClass('active')) return\n\n    var previous = $ul.find('.active:last a')[0]\n    var e        = $.Event('show.bs.tab', {\n      relatedTarget: previous\n    })\n\n    $this.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    var $target = $(selector)\n\n    this.activate($this.parent('li'), $ul)\n    this.activate($target, $target.parent(), function () {\n      $this.trigger({\n        type: 'shown.bs.tab',\n        relatedTarget: previous\n      })\n    })\n  }\n\n  Tab.prototype.activate = function (element, container, callback) {\n    var $active    = container.find('> .active')\n    var transition = callback\n      && $.support.transition\n      && $active.hasClass('fade')\n\n    function next() {\n      $active\n        .removeClass('active')\n        .find('> .dropdown-menu > .active')\n        .removeClass('active')\n\n      element.addClass('active')\n\n      if (transition) {\n        element[0].offsetWidth // reflow for transition\n        element.addClass('in')\n      } else {\n        element.removeClass('fade')\n      }\n\n      if (element.parent('.dropdown-menu')) {\n        element.closest('li.dropdown').addClass('active')\n      }\n\n      callback && callback()\n    }\n\n    transition ?\n      $active\n        .one($.support.transition.end, next)\n        .emulateTransitionEnd(150) :\n      next()\n\n    $active.removeClass('in')\n  }\n\n\n  // TAB PLUGIN DEFINITION\n  // =====================\n\n  var old = $.fn.tab\n\n  $.fn.tab = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.tab')\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tab.Constructor = Tab\n\n\n  // TAB NO CONFLICT\n  // ===============\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n  // TAB DATA-API\n  // ============\n\n  $(document).on('click.bs.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\n    e.preventDefault()\n    $(this).tab('show')\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: affix.js v3.1.1\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n    this.$window = $(window)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      =\n    this.unpin        =\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.RESET = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$window.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var scrollHeight = $(document).height()\n    var scrollTop    = this.$window.scrollTop()\n    var position     = this.$element.offset()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n\n    if (this.affixed == 'top') position.top += scrollTop\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.unpin   != null && (scrollTop + this.unpin <= position.top) ? false :\n                offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ? 'bottom' :\n                offsetTop    != null && (scrollTop <= offsetTop) ? 'top' : false\n\n    if (this.affixed === affix) return\n    if (this.unpin) this.$element.css('top', '')\n\n    var affixType = 'affix' + (affix ? '-' + affix : '')\n    var e         = $.Event(affixType + '.bs.affix')\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    this.affixed = affix\n    this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n    this.$element\n      .removeClass(Affix.RESET)\n      .addClass(affixType)\n      .trigger($.Event(affixType.replace('affix', 'affixed')))\n\n    if (affix == 'bottom') {\n      this.$element.offset({ top: scrollHeight - offsetBottom - this.$element.height() })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.affix\n\n  $.fn.affix = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop)    data.offset.top    = data.offsetTop\n\n      $spy.affix(data)\n    })\n  })\n\n}(jQuery);\n"]}]}